var actions={};var webutils={};var transition_end="webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend";var flextest=$("html").hasClass("flexbox");jQuery.fn.cloneWidthHeight=function(prop,params){params=params||false;var elem,height,width;var el=this;if(el.attr("data-max-height")===undefined||el.attr("data-max-width")===undefined){if(params.setattr){webutils.setImgDimensionsAttr(el)}elem=el.clone().addClass("hidden-clone").css("width",el.outerWidth(true)).appendTo("body");height=elem.outerHeight(false),width=elem.width();elem.remove()}else{height=el.attr("data-max-height"),width=el.attr("data-max-width")}switch(prop){case"height":return el.css("max-height",height).attr("data-max-height",height);break;case"width":return el.css("max-width",width);break}};webutils.setImgDimensionsAttr=function(el,reset){reset=reset||false;var is_set=el.data("setImgDimensions");if(!el.length||is_set&&!reset){return false}var imgs=el.find("img"),imgs_l=imgs.length;function setWHAttr(el){var w=el.width(),h=el.height();el.attr({width:w,height:h})}if(imgs_l>1){imgs.each(function(){setWHAttr($(this))})}else{setWHAttr(imgs)}el.data("setImgDimensions",true)};webutils.touchLinkRedirect=function(el){var url=el.attr("href");if(url===undefined){return}window.location=url};webutils.getHashByKey=function(key){var window_hash=window.location.hash;if(window_hash.indexOf(key)<0){return}window_hash=window_hash.replace("#"+key+":","");return window_hash};webutils.getHash=function(){return window.location.hash};webutils.removeSpaceInRow=function(row){if(row===undefined){return row.replace(/\s+/g,"")}return row.replace(/\s+/g,"")};webutils.costFormat=function(nStr){nStr+="";var x=nStr.split(".");var x1=x[0];var x2=x.length>1?"."+x[1]:"";var rgx=/(\d+)(\d{3})/;while(rgx.test(x1)){x1=x1.replace(rgx,"$1 $2")}return x1+x2};webutils.scrollTo=function(elem){var type=$.type(elem);var scrollto;switch(type){case"object":scrollto=elem.offset().top;break;case"number":scrollto=elem;break}$("html, body, .p-sideslide__inner").animate({scrollTop:scrollto},400)};function getElemsWidth(wrapper,target){var w=0,elems=wrapper.find(target);elems.each(function(){w=w+$(this).outerWidth(true)});return w}function getHighestElem(wrapper,target,outer){var cur=0,max=0,elems=wrapper.find(target);elems.each(function(){if(outer){cur=$(this).outerHeight(false)}else{cur=$(this).height()}if(cur>max){max=cur}});return max}function ie_ver(){var iev=false;var ieold=(/MSIE (\d+\.\d+);/.test(navigator.userAgent));var trident=!!navigator.userAgent.match(/Trident\/7.0/);var rv=navigator.userAgent.indexOf("rv:11.0");if(ieold){iev=new Number(RegExp.$1)}if(navigator.appVersion.indexOf("MSIE 10")!==-1){iev=10}if(trident&&rv!==-1){iev=11}return iev}webutils.flexboxtweenerRemove=function(){if(ie_ver()>=10&&$(".p-wrap").eq(0).height()>webutils.windowSize().height){$("html").addClass("no-stickyhack")}};function ifComplite(callback){var d=$.Deferred();callback();d.resolve();return d}(function(){function getMq(){var mq_div=$("#mq_helper"),mq=mq_div.css("z-index");if(mq!==undefined){return parseInt(mq)}else{return"mediate"}}webutils.GlobalMeqdiaQueries=getMq();$(window).on("resize",function(){webutils.GlobalMeqdiaQueries=getMq()})})();function mq(){return webutils.GlobalMeqdiaQueries}webutils.windowSize=function(){var w=isNaN(window.innerWidth)?window.clientWidth:window.innerWidth;var h=isNaN(window.innerHeight)?window.clientHeight:window.innerHeight;return{width:w,height:h}};function getRandomArbitary(){return Math.floor(Math.random()*(100-0)+0)}var contentBlockHeigth=function(reset){$(".units-content-row").each(function(){$(this).children(".unit-content").matchHeight()})};var ajustBottom=function(e){var rows=$(".js-tobottom-row"),blocks=rows.find(".js-tobotton-unit"),row_height,block_height,mq_string=mq().toString();$.each(rows.toArray(),function(i,el){row_height=$(el).height();blocks;mq_arr=$(el).attr("data-tobottom-mq").split(",");$.each(blocks.toArray(),function(i,el){block_height=$(el).outerHeight(true);if(block_height<row_height){if(mq_arr.indexOf(mq_string)!==-1){$(el).css("margin-top",(row_height-block_height)+"px")}else{blocks.removeAttr("style")}}})})};$(window).on({load:function(){if((mq()<=2)&&!flextest){contentBlockHeigth()}if(ie_ver()){$("html").addClass("ie"+ie_ver())}ajustBottom();initDatePick($(".js-input-datepick"));if(window.dependentScrolledBlock!==undefined&&$(".js-desctop-scrolled-block").length){dependentScrolledBlock.init()}actions.upButton()},resize:function(){ajustBottom();switch(mq()){case 3:case 2:case 1:if(!flextest){contentBlockHeigth(true);contentBlockHeigth()}}}});$(document).on("click change ifChanged",".js-showbox",function(e){e.preventDefault();var $elem=$(this),boxid=$elem.attr("href"),addToThisClass=$elem.attr("data-showbox-addclass");if(boxid===undefined){boxid=$elem.attr("data-href")}if($(boxid).hasClass("is-visible")){$(boxid).removeClass("is-visible");$elem.removeClass(addToThisClass)}else{$(boxid).addClass("is-visible");$elem.addClass(addToThisClass)}});$("select.js-selswitch").on("change",function(e){var $this=$(this),opt_val;$this.find("option").each(function(){opt_val=$(this).attr("value");$("#"+opt_val).removeClass("is-visible")});$("#"+$this.val()).addClass("is-visible")});$(".js-checked-action").on("change",function(){if($(this).prop("checked")){$($(this).attr("data-href")).attr("href",$(this).attr("data-url")).removeClass("button-disabled")}else{$($(this).attr("data-href")).removeAttr("href").addClass("button-disabled")}});$(".js-showbox-switch").on("click",function(e){e.preventDefault();var boxid=$(this).attr("href"),thisid=this.id;if(boxid===undefined){boxid=$(this).attr("data-href")}var attrid=$(boxid).attr("data-swithbox");if(attrid===undefined){attrid="#"+thisid;$(boxid).attr("data-swithbox",attrid)}else{attrid=$(boxid).attr("data-swithbox")}$(boxid).addClass("is-switch");$(attrid).removeClass("is-switch");$(boxid).on("click",function(e){e.preventDefault();if($(this).hasClass("is-switch")){$(this).removeClass("is-switch");$(attrid).addClass("is-switch")}})});$(".js-toggle-box").on("click",function(e){e.preventDefault();var $this=$(this),target=$this.attr("data-togglebox");$(target).cloneWidthHeight("height");$this.addClass("is-hidden");$(target).on(transition_end,function(){$this.addClass("none-elem");$(target).removeAttr("style").removeClass("toggle-box")})});$(".js-showmore-link").on("click.showmore",function(){var promoblock=$($(this).attr("data-promoblock"));promoblock.removeClass("is-active");promoblock.siblings().filter(".js-item-desc-default").addClass("is-active")});$(document).on("click",".js-expand-el",function(e){e.preventDefault();var $elem=$(this),boxid=$elem.attr("href");if(boxid===undefined){boxid=$elem.attr("data-href")}if($elem.data("original-txt")===undefined){var original_txt=$elem.text();$elem.data("original-txt",original_txt)}var opened_txt=$elem.data("txt");if(opened_txt===undefined){opened_txt=$elem.data("original-txt")}$(boxid).slideToggle(400,function(){if($(this).is(":visible")){$elem.text(opened_txt).addClass("is-opened")}else{$elem.text($elem.data("original-txt")).removeClass("is-opened")}})});$(document).on("click",".js-switch-state",function(e){e.preventDefault();var $this=$(this);if($this.hasMod("active","true")){$this.delMod("active","true")}else{$this.setMod("active","true")}});var overlay=$(".modal-overlay").eq(0);function mobileSidebarShift(elem,dir,revers){revers=revers||false;var shift=20,pm="+=";if(revers){pm="-="}switch(dir){case"right":elem.css("right",pm+shift);break;case"left":elem.css("left",pm+shift);break}}actions.accordionInit=function(){if($(".v-tabs").length){var tabs=$(".v-tabs"),tab_id;tabs.each(function(){tab_id=this.id;if(!tab_id.length){this.id="tab"+getRandomArbitary()}$(this).accordion({oneOpenedItem:true,easing:false,scrollEasing:false,itemClass:"v-tabs__item",headClass:"v-tabs__head",contentClass:"v-tabs__content"})})}};$(".js-showpass").on("click",function(e){e.preventDefault();var field=$(this).siblings("input:password").eq(0),state=$(this).hasMod("show");if(field.length){var id=field.attr("id");if(id===undefined&&$(this).data("field")===undefined){id="id"+getRandomArbitary();field.attr("id",id)}$(this).data("field",id)}if(!state){$(this).setMod("show")}else{$(this).delMod("show")}state=!state;$("#"+$(this).data("field")).hideShowPassword(state)});actions.tipsyInit=function(){var tipsy_nw_opts={delayIn:100,delayOut:100,offset:-6,opacity:1,title:"data-tooltip",trigger:"manual",gravity:function(){var $this=$(this);if($this.data("tooltip-class")!==undefined){$(".tipsy").addClass($this.data("tooltip-class"))}return"nw"}};var tipsy_sw_opts={delayIn:100,delayOut:100,offset:6,opacity:1,title:"data-tooltip",trigger:"hover",gravity:"sw"};var tipsy_se_opts={delayIn:100,delayOut:100,offset:6,opacity:1,title:"data-tooltip",trigger:"hover",gravity:"se"};var tipsy_s_opts={delayIn:100,delayOut:100,offset:6,opacity:1,title:"data-tooltip",trigger:"hover",gravity:"s"};var tipsy_nw_error_opts={className:"error"};var tipsy_nw_infoico_opts={className:"tipsy-infoico"};var tipsy_nw_map8800_opts={className:"tipsy-map8800",trigger:"hover",offset:-16,gravity:function(){if($(this).hasClass("map8800__8800")){$(".tipsy").addClass("tipsy-8800")}return"nw"}};var tipsy_nw_map8800_icons_opts={className:"tipsy-map8800-icons",trigger:"hover",offset:-4};$(".tipsy-nw, .js-tipsy").tipsy(tipsy_nw_opts);$(".js-tipsy-sw").tipsy(tipsy_sw_opts);$(".js-tipsy-se").tipsy(tipsy_se_opts);$(".js-tipsy-s").tipsy(tipsy_s_opts);$(".js-tipsy-error").tipsy($.extend(tipsy_nw_opts,tipsy_nw_error_opts));$(".js-tipsy-infoico").tipsy($.extend(tipsy_nw_opts,tipsy_nw_infoico_opts));$(".js-tipsy-map8800").tipsy($.extend(tipsy_nw_opts,tipsy_nw_map8800_opts));$(".js-tipsy-map8800-icons").tipsy($.extend(tipsy_nw_opts,tipsy_nw_map8800_icons_opts));$(window).on("resize",function(){$(".tipsy-nw, .js-tipsy, .js-tipsy-error, .js-tipsy-sw").tipsy("hide")})};actions.blockDesc=function(){var desc_key=$("[data-desc]"),desc_key_click=$("[data-desc-click]");if(!desc_key.length&&!desc_key_click.length){return false}var item_desc_class=".js-item-desc",item_desc_active_class="is-active",item_desc_default_class=".js-item-desc-default";function show(){var $elem=$(this),desc_id=$elem.attr("data-desc")||$elem.attr("data-desc-click");var desc_tariff=$elem.data("desc-tariff");if(desc_tariff!==undefined){$(desc_id).find(item_desc_class).addClass(item_desc_active_class);getSiblings(desc_id,desc_tariff);return}var desc_siblings=getSiblings(desc_id);$(desc_id).addClass(item_desc_active_class);desc_siblings.removeClass(item_desc_active_class);jQuery.data(this,"active",desc_id)}function hide(){var desc_active=jQuery.data(this,"active"),desc_siblings=getSiblings(desc_active);$(desc_active).removeClass(item_desc_active_class);desc_siblings.filter(item_desc_default_class).addClass(item_desc_active_class)}function getSiblings(elem,tariff){tariff=tariff||false;if(!tariff){return $(elem).siblings(item_desc_class)}else{$('[data-desc-tariff="'+tariff+'"]:not([data-desc-click="'+elem+'"])').each(function(){$($(this).data("desc-click")).find(item_desc_class).removeClass(item_desc_active_class)})}}desc_key.on("mouseover.blockDesc",show).on("mouseout.blockDesc",hide);desc_key_click.on("click.blockDesc",show)};actions.moveableUnits=function(){var units_movable=$(".js-unit-movable");if(!units_movable.length){return false}$(window).on("load.movable resize.movable",function(){replaceBlock()});var units_placeholder=$(".js-unit-placeholder"),moved_unit_class="moved",breakpoint=3,custom_breakpoint,uid,placeholder;var replaceBlock=function(){units_movable=$(".js-unit-movable");units_movable.not("."+moved_unit_class).each(function(){custom_breakpoint=parseInt($(this).attr("data-breakpoint"));if(custom_breakpoint!==NaN){breakpoint=custom_breakpoint}if(breakpoint<=mq()){uid=this.id;placeholder=units_placeholder.filter('[data-placeholder-id="'+uid+'"]');$(this).wrap('<div id="wrap-'+uid+'"></div>').addClass(moved_unit_class).prependTo(placeholder);placeholder.addClass(placeholder.attr("data-placeholder-classes"))}});if(breakpoint>mq()){returnBlock()}};var returnBlock=function(){units_movable=$(".js-unit-movable");units_movable.filter("."+moved_unit_class).each(function(){uid=this.id;$(this).removeClass(moved_unit_class);$(this).prependTo($("#wrap-"+uid)).unwrap();placeholder=units_placeholder.filter('[data-placeholder-id="'+uid+'"]');placeholder.removeAttr("class")})}};$(document).on("click",".js-mfp-close",function(){$.magnificPopup.close()});var inline_popup_props={preloader:true,type:"inline",closeBtnInside:false,showCloseBtn:false,fixedContentPos:true,fixedBgPos:true};$(".js-open-popup, .js-mpf").magnificPopup(inline_popup_props);$(".js-open-image").magnificPopup({type:"image",closeOnContentClick:true,closeBtnInside:false,image:{verticalFit:true},zoom:{enabled:true}});$(".js-open-videoframe").magnificPopup({type:"iframe",closeBtnInside:false,closeOnBgClick:false,mainClass:"mfp-fade",preloader:false,fixedContentPos:false,iframe:{patterns:{youtube:{index:"youtube.com",id:"v=",src:"//www.youtube.com/embed/%id%?rel=0&showinfo=0"}}}});$(".js-zoom-gallery").magnificPopup({delegate:"a",type:"image",closeOnContentClick:false,closeBtnInside:false,mainClass:"mfp-with-zoom mfp-img-mobile",image:{verticalFit:true},gallery:{enabled:true,tPrev:"Предыдущая",tNext:"Следующая",tCounter:""},zoom:{enabled:true,duration:300,opener:function(element){return element.find("img")}},callbacks:{beforeOpen:function(){var $container=this.ev.prevObject;if($container.hasClass("js-page-swiper")){var index=$(".js-page-swiper").index($container);var swiper=actions.pageSwiper().slider(index);this.swiperarrows=0;var allslides=swiper.slides.length,visslides=swiper.visibleSlides.length;if(allslides!==visslides){this.swiperarrows=1}this.swiper=swiper}},buildControls:function(){this.contentContainer.append(this.arrowLeft.add(this.arrowRight))},change:function(){if(this.swiperarrows){var swiper=this.swiper;var slide=$(swiper.getSlide(this.index)),next_slide=slide.next(),prev_slide=slide.prev();var direction_next=swiper.visibleSlides.indexOf(next_slide[0]),direction_prev=swiper.visibleSlides.indexOf(prev_slide[0]);if(direction_next===-1){swiper.swipeNext()}if(direction_prev===-1){swiper.swipePrev()}}}}});actions.unitsNumber=function(){var block_class=".js-units-number",plus_class=".units-number-plus",minus_class=".units-number-minus",btn_class=".js-units-number-btn",data_class=".units-number-data",disabled_class="units-number-disabled",block=$(block_class),data,plus,minus,data_id,target_id;var init=function(){block.each(function(){data=$(this).find(data_class).eq(0),buttons=$(this).find(btn_class),plus=$(this).find(plus_class).eq(0),minus=$(this).find(minus_class).eq(0),data_id="un"+getRandomArbitary(),data_inc=parseInt(data.text());data.attr("id",data_id);buttons.attr("data-un-id","#"+data_id);setDefaultState($(this),data_inc,buttons);target_id=$(this).attr("data-num-target");if($(target_id).length){var target=$(target_id),target_type=target.prop("tagName").toLowerCase(),target_data;target.attr("data-num-type",target_type);switch(target_type){case"input":target_data=parseInt(webutils.removeSpaceInRow(target.val()));break;default:target_data=parseInt(webutils.removeSpaceInRow(target.text()))}if(data_inc>1){target_data=target_data/data_inc}target.attr("data-num-default",target_data)}});$(plus_class).on("click",function(){if($(this).hasClass(disabled_class)){return false}var data_id=$(this).attr("data-un-id");incrementValue(data_id,1,this);groupMax($(data_id))});$(minus_class).on("click",function(){if($(this).hasClass(disabled_class)){return false}var data_id=$(this).attr("data-un-id");incrementValue(data_id,-1,this)})};var groupMax=function(data){var this_block=data.parent(block_class),group_max=this_block.attr("data-num-group-max"),group_name=this_block.attr("data-num-group");if(group_max===undefined||group_name===undefined){return false}group_max=parseInt(group_max);var group=$(block_class).filter('[data-num-group="'+group_name+'"]'),temp=0;group.each(function(){temp+=parseInt($(this).find(data_class).eq(0).text())});if(temp>group_max){$.magnificPopup.open({items:{src:"#popup-optnum-limit"},type:"inline",closeBtnInside:false,showCloseBtn:false,fixedContentPos:false})}};function setDefaultState(block,data,buttons){var plus=buttons.filter(plus_class),minus=buttons.filter(minus_class);if(data===parseInt(block.attr("data-num-min"))){minus.addClass(disabled_class)}if(data===parseInt(block.attr("data-num-max"))){plus.addClass(disabled_class)}}function incrementValue(id,val,btn){var elem=$(id),button=$(btn),second_button=button.siblings(btn_class),data_max=elem.parent(block_class).attr("data-num-max"),data_min=elem.parent(block_class).attr("data-num-min"),data_target_id=elem.parent(block_class).attr("data-num-target");if(data_max===undefined){data_max=10}else{data_max=parseInt(data_max)}if(data_min===undefined){data_min=1}else{data_min=parseInt(data_min)}var inc=Math.max(parseInt(elem.text())+val,0);elem.text(inc);var this_data=parseInt(elem.text());if(this_data==data_max||this_data==data_min){button.addClass(disabled_class);second_button.removeClass(disabled_class)}else{button.removeClass(disabled_class);second_button.removeClass(disabled_class)}var target=$(data_target_id);if(target.length){var target_type=target.attr("data-num-type"),target_default_data=parseInt(target.attr("data-num-default")),target_data=parseInt(target.attr("data-num-default")),target_new_data;switch(target_type){case"input":target_data=parseInt(webutils.removeSpaceInRow(target.val()));break;default:target_data=parseInt(webutils.removeSpaceInRow(target.text()))}if(val===1){target_new_data=target_default_data*this_data}else{target_new_data=target_data-target_default_data}switch(target_type){case"input":target.val(webutils.costFormat(target_new_data));break;default:target.text(webutils.costFormat(target_new_data))}}}var enableDisableButtons=function(buttons,act){switch(act){case true:buttons.addClass(disabled_class);break;case false:buttons.removeClass(disabled_class);break}};var enableDisableInc=function(opt,act){var inc_block=opt.find(block_class).eq(0),buttons=inc_block.find(btn_class),data=inc_block.find(data_class).eq(0);switch(act){case true:buttons.removeClass(disabled_class);data.removeClass(disabled_class);break;case false:buttons.addClass(disabled_class);data.addClass(disabled_class);break}setDefaultState(inc_block,data,buttons)};return{enableDisable:enableDisableInc,initNum:init,checkMax:groupMax}};actions.radioBtnGroup=function(){var group=$(".js-rgroup"),items=group.find(".js-rgroup-item");items.each(function(){var $this=$(this);$this.data("parent",$this.parent());$this.data("group",$this.parents(".js-rgroup"));if($this.is(":checked")){$this.data("parent").setMod("active")}});items.on("change.rgroup",function(){var $this=$(this),$this_group=$this.data("group").find(".js-rgroup-item");$this_group.parent().delMod("active");$this.data("parent").setMod("active")})};actions.setFloatBar=function(){var block=$(".js-set-floatbar").eq(0),bar=$("#"+block.data("floatbar"));if(!block.length||!bar.length){return false}var point=block.offset().top+block.height(),scrollpos;$(window).on("scroll.floatbar",function(){scrollpos=$(this).scrollTop();if(scrollpos>point){bar.setMod("visible")}else{bar.delMod("visible")}})};actions.showParamountPopup=function(){var hash=webutils.getHash();if($(hash).length){$(window).on("load",function(){$.magnificPopup.open({items:{src:hash},type:"inline",closeBtnInside:false,showCloseBtn:false,fixedContentPos:false})})}};actions.selectricInit=function(){if(typeof($.fn.selectric)!=="undefined"){$(".js-selectric0").selectric({customClass:{prefix:"selectric0",postfixes:"Input Items Open Disabled TempShow HideSelect Wrapper Hover Responsive",camelCase:false}});$(".js-selectric2").selectric({customClass:{prefix:"selectric2",postfixes:"Input Items Open Disabled TempShow HideSelect Wrapper Hover Responsive",camelCase:false}});$(".js-selectric0_with-default").selectric().parents(".selectric0-wrapper").addClass("selectric0-default");$(".js-selectric0_with-default").change(function(){$(this).parents(".selectric0-wrapper").removeClass("selectric0-default")});$(".js-selectric2_with-default").selectric({customClass:{prefix:"selectric2",postfixes:"Input Items Open Disabled TempShow HideSelect Wrapper Hover Responsive",camelCase:false}}).parents(".selectric2-wrapper").addClass("selectric2-default");$(".js-selectric2_with-default").change(function(){$(this).parents(".selectric2-wrapper").removeClass("selectric2-default")});$(".js-selectric3").selectric({customClass:{prefix:"selectric2",postfixes:"Input Items Open Disabled TempShow HideSelect Wrapper Hover Responsive",camelCase:false},disableOnMobile:false,maxHeight:400,onOpen:function(e){if($(e).hasClass("opt-replased")){return false}var postfixes=this.customClass.postfixes.split(" "),prefix=this.customClass.prefix,arrClasses=[],currPostfix;while(currPostfix=postfixes.shift()){arrClasses.push((prefix+currPostfix).replace(/([A-Z])/g,"-$&").toLowerCase())}selectricOptReplace($(e),arrClasses[6]);$(e).one("change",function(){$(this).parents("."+arrClasses[6]).eq(0).removeClass(prefix+"-default")})},onChange:function(e){var postfixes=this.customClass.postfixes.split(" "),prefix=this.customClass.prefix,wrapper=$(e).parents("."+(prefix+postfixes[6]).replace(/([A-Z])/g,"-$&").toLowerCase());wrapper.next(".notes-info-fields").removeClass("none-elem");var cost_clone=wrapper.find("li.selected").children(".sel-opt-cost").clone();cost_clone.find("span").remove();cost=$("<span> &mdash;&nbsp;<b>"+cost_clone.text()+"</b></span>");cost_clone.remove();setTimeout(function(){cost.appendTo(wrapper.find(".label").eq(0))},50)}}).parents(".selectric2-wrapper").addClass("selectric2-default");var selectricOptReplace=function(el,classname){var opts=el.find("option"),items=el.parents("."+classname).find("li"),str;opts.each(function(index){str=$(this).attr("data-opt");if(str!==undefined&&str!==""){$(items[index]).html("").html(str)}});el.addClass("opt-replased")}}$('select[class^="js-selectric"]').css("visibility","visible")};actions.iCheckInit=function(){var $checkboxes=$(".js-iCheck");if(!$checkboxes.length){return false}if(typeof($.fn.iCheck)!=="undefined"){$checkboxes.iCheck({cursor:true,inheritClass:true,checkboxClass:"iCheck0",checkedClass:"iCheck0_checked",uncheckedClass:"iCheck0_unchecked",disabledClass:"iCheck0_disabled"})}};actions.iCheckRadioBlue=function(){var $radio=$(".js-blue-radio");if(!$radio.length){return false}if(typeof($.fn.iCheck)!=="undefined"){$radio.iCheck({cursor:true,inheritClass:true,radioClass:"blue-radio",checkedClass:"blue-radio_checked",uncheckedClass:"blue-radio_unchecked",disabledClass:"blue-radio_disabled"})}};actions.iCheckRadioGrey=function(){var $radio=$(".js-grey-radio");if(!$radio.length){return false}if(typeof($.fn.iCheck)!=="undefined"){$radio.iCheck({cursor:true,inheritClass:true,radioClass:"grey-radio",checkedClass:"grey-radio_checked",uncheckedClass:"grey-radio_unchecked",disabledClass:"grey-radio_disabled"})}};actions.iCheckCheckboxBlue=function(){var $checkboxes=$(".js-blue-checkbox");if(!$checkboxes.length){return false}if(typeof($.fn.iCheck)!=="undefined"){$checkboxes.iCheck({cursor:true,inheritClass:true,checkboxClass:"blue-checkbox",checkedClass:"blue-checkbox_checked",uncheckedClass:"blue-checkbox_unchecked",disabledClass:"blue-checkbox_disabled"})}};actions.iCheckCheckboxGray=function(){var $checkboxes=$(".js-gray-checkbox");if(!$checkboxes.length){return false}if(typeof($.fn.iCheck)!=="undefined"){$checkboxes.iCheck({cursor:true,inheritClass:true,checkboxClass:"gray-checkbox",checkedClass:"gray-checkbox_checked",uncheckedClass:"gray-checkbox_unchecked",disabledClass:"gray-checkbox_disabled"})}};actions.placeholderInit=function(){$("input, textarea").placeholder()};actions.noUiSliderInit=function(){$(".form-slider").each(function(){var $this=$(this),view=$this.data("form-slider")||"single",min=$this.data("form-slider-min")||0,max=$this.data("form-slider-max")||10,step=$this.data("form-slider-step")||1,stepVal=$this.data("form-slider-stepval")||step,i=min,j=0,temp,temp2,temp3,numbersStep=(max-min)/step,colored=$this.data("form-slider-colored")||false,start=$this.data("form-slider-start")||Math.ceil(numbersStep/2)*step,start2=$this.data("form-slider-start2")||max,$wrapsleder=$("<div class='form-slider__wrap-slider'></div>"),$wrapnumbers=$("<div class='form-slider__wrap-numbers'></div>"),$wrapstrokes=$("<div class='form-slider__wrap-strokes'></div>"),$wrapinput=$("<div class='form-slider__wrap-input'></div>"),isprettify;$wrapinput.append("<input pattern='[0-9]*' max='"+max+"' min='"+min+"' class='input-type1 form-slider__input' value='"+start+"' />");$this.after($wrapsleder);$wrapsleder.prepend($this,$wrapstrokes,$wrapnumbers,$wrapinput);while(i<=max){temp=((view=="single"&&i<=start)||(view=="range"&&i>=start&&i<=start2))?" form-slider__number_connect":"";temp2=(i==start||(view=="range"&&i==start2))?" form-slider__number_start":"";temp3=1/numbersStep*j*100;$wrapnumbers.append("<span class='form-slider__number"+temp+temp2+"' style='left:"+temp3+"%'>"+i+"</span>");$wrapstrokes.append("<span class='form-slider__stroke' style='left:"+temp3+"%'></span>");i+=step;j++}function prettifyNumVal(){if(mq()>=3&&!isprettify&&numbersStep>10){$wrapnumbers.children(".form-slider__number").each(function(index){if(index%2){$(this).addClass("hidden-elem")}});isprettify=true}if(mq()<3&&isprettify){$wrapnumbers.children(".form-slider__number").removeClass("hidden-elem");isprettify=false}}prettifyNumVal();$(window).on("resize.noUiSliderInit",prettifyNumVal);if(view=="single"){$this.noUiSlider({connect:"lower",step:stepVal,start:start,range:{min:min,max:max}}).on("slide set",function(){j=($(this).val()-min)/step;if(!(j%1)){j=j>>0;$wrapnumbers.children(".form-slider__number").slice(0,j).addClass("form-slider__number_connect").removeClass("form-slider__number_start").end().eq(j).addClass("form-slider__number_connect form-slider__number_start").end().slice(j+1,numbersStep+1).removeClass("form-slider__number_connect form-slider__number_start")}else{$wrapnumbers.children(".form-slider__number").removeClass("form-slider__number_start form-slider__number_connect").slice(0,Math.ceil(j)).addClass("form-slider__number_connect")}$wrapinput.children(".form-slider__input").val($(this).val()>>0)});$wrapnumbers.children(".form-slider__number").on("click",function(){$this.val($(this).text())});$wrapinput.children(".form-slider__input").on("change blur",function(){$this.val(+$(this).val())}).on("keyup",function(e){if(e.keyCode===38){$this.val(+$(this).val()+1)}else{if(e.keyCode===40){$this.val(+$(this).val()-1)}}})}else{if(view=="range"){$this.noUiSlider({connect:true,step:step,start:[start,start2],range:{min:min,max:max}})}}if(colored){$this.addClass("form-slider_blue")}})};actions.bizSolutionCalc=function(){var tariff=$(".unit-tariff"),tariff_traffic=tariff.find("select.js-calc-traffic"),tariff_phones=tariff.find("select.js-calc-phones");tariff_traffic.on("change",function(){var elems=findCurCalc($(this));calc(elems)});tariff_phones.on("change",function(){var elems=findCurCalc($(this));calc(elems)});function findCurCalc(el){var tariff=el.parents(".unit-tariff"),tariff_traffic=tariff.find("select.js-calc-traffic").eq(0),tariff_phones=tariff.find("select.js-calc-phones").eq(0),tariff_result=tariff.find(".js-calc-result").eq(0);return{calctariff:tariff,calctraffic:tariff_traffic,calcphones:tariff_phones,calcresult:tariff_result}}function calc(elems){var phonecost=elems.calcresult.data("phonecost");var data=parseInt(elems.calctraffic.val())+(parseInt(elems.calcphones.val())*parseInt(phonecost));elems.calcresult.text(data)}};actions.carusel3imgInit=function(){var carusels=$(".carusel3img");if(!carusels.length){return false}var Class_SlideOn="carusel3img__slide_on",Class_SlideOff="carusel3img__slide_off",Class_ImgCurent="carusel3img__box-img-wrap_curent",Class_ImgOnTop="carusel3img__box-img-wrap_to-top",Class_ImgOnBottom="carusel3img__box-img-wrap_to-bottom",Class_ImgWrap="carusel3img__box-img-wrap";carusels.each(function(index){var $thisCarusel=$(this);var thisDefault=$thisCarusel.find("."+Class_SlideOn),$mainWrap=$thisCarusel.children(".carusel3img__main"),$DefImg=$mainWrap.children("."+Class_ImgWrap).eq(thisDefault.index());var toogleItem=function($Img){var ThisIndex=$Img.index();$Img.addClass(Class_ImgCurent).removeClass(Class_ImgOnTop+" "+Class_ImgOnBottom).siblings("."+Class_ImgWrap).each(function(index){var $thisElem=$(this);if(ThisIndex>index){$thisElem.addClass(Class_ImgOnTop).removeClass(Class_ImgOnBottom+" "+Class_ImgCurent)}else{$thisElem.addClass(Class_ImgOnBottom).removeClass(Class_ImgOnTop+" "+Class_ImgCurent)}})};toogleItem($DefImg);$thisCarusel.find(".carusel3img__slide").on("click",function(){var $thisElem=$(this),thisIndex=$thisElem.index(),$curentImg=$mainWrap.children("."+Class_ImgCurent),$thisImg=$mainWrap.children("."+Class_ImgWrap).eq(thisIndex);toogleItem($thisImg);$thisElem.toggleClass(Class_SlideOn+" "+Class_SlideOff).parent().children().eq($curentImg.index()).toggleClass(Class_SlideOn+" "+Class_SlideOff)})})};actions.configChoise=function(){var choise=$(".config-choise"),choise_mini=$(".config-choise-mini"),icon,choise_checkbox=choise.find(".js-config-choise-check"),choise_mini_checkbox=choise_mini.find(".js-config-choise-check"),tvchannels=$(".package-tvchannel");var num_opt_class="js-config-choise-num",num_data_class="units-number-data",num_checkbox=$("."+num_opt_class);var additional_head=choise.find(".js-additional-head"),additional_close=choise.find(".js-additional-close");var rel_scrolled_class="js-desctop-ref-to-scrolled-block",scrolled_class="js-desctop-scrolled-block";additional_head.on("click",function(){var $this=$(this);var head=$this,parent_config_choise=$this.parents(".js-config-choise");additional_info=parent_config_choise.find(".js-additional-info:first");if($this.hasClass("is-active")){head.removeClass("is-active");additional_info.removeClass("is-active").removeAttr("style");return}head.addClass("is-active");$(additional_info).cloneWidthHeight("height").addClass("is-active");var additional_opened=parent_config_choise.siblings(".js-config-choise").find(additional_head).filter(".is-active");if(additional_opened.length){additional_opened.removeClass("is-active");additional_opened.parents(".js-config-choise").find(".js-additional-info:first").removeClass("is-active").removeAttr("style")}});additional_close.on("click",function(){var $this_section=$(this).parents(".js-config-choise");$this_section.find(".js-additional-head:first").trigger("click");$(additional_info).one(transition_end,function(){addScroll.reset($this_section)})});var $hash_opt=$(webutils.getHash());if($hash_opt.length){$hash_opt.find(additional_head).eq(0).trigger("click")}choise_checkbox.on("ifChanged",function(){activeOpt($(this))});num_checkbox.on("ifChanged",function(){activeOptNum($(this));if($(this).is(":checked")){var this_num=$(this).parents(".js-config-choise").eq(0).find("."+num_data_class).eq(0);actions.unitsNumber().checkMax(this_num)}});choise_mini_checkbox.on("ifChanged",function(){activeOpt($(this))});function activeCheckbox(elem){if(elem.is(":checked")){elem.block().elem("icon").setMod("choise","checked");elem.block().elem("cost").addClass("opt-checked").removeClass("opt-unchecked")}else{elem.block().elem("cost").removeClass("opt-checked").addClass("opt-unchecked")}}function activeOptNum(elem){if(elem.is("input")){var this_opt=elem.parents(".js-config-choise").eq(0);actions.unitsNumber().enableDisable(this_opt,elem.is(":checked"))}}function activeOpt(checkbox){var chb=checkbox||false;if(chb&&chb.is("input")){icon=chb.parents(".config-choise-mini, .config-choise").elem("icon");if(icon.hasMod("choise","checked")){icon.delMod("choise","checked");chb.parents("label").eq(0).removeClass("opt-checked").addClass("opt-unchecked")}else{icon.setMod("choise","checked");chb.parents("label").eq(0).addClass("opt-checked").removeClass("opt-unchecked")}if(chb.hasClass(num_opt_class)){var this_opt=chb.parents(".js-config-choise").eq(0);actions.unitsNumber().enableDisable(this_opt,chb.is(":checked"))}return true}else{choise_checkbox.each(function(){activeCheckbox($(this))});num_checkbox.each(function(){activeOptNum($(this))});choise_mini_checkbox.each(function(){activeCheckbox($(this))})}}activeOpt();function addScrollDesc(){var $this,tvchannels_list,tvchannels_desc;this.init=function(){tvchannels.each(function(){$this=$(this),tvchannels_list=$this.elem("list"),tvchannels_desc=$this.elem("desc");if((tvchannels_list.length&&!tvchannels_list.parents("."+rel_scrolled_class).length)&&(tvchannels_desc.length&&!tvchannels_desc.parents("."+scrolled_class).length)){tvchannels_list.addClass(rel_scrolled_class),tvchannels_desc.addClass(scrolled_class)}if(window.dependentScrolledBlock!==undefined&&$(".js-desctop-scrolled-block").length){dependentScrolledBlock.init()}})};var cur_list,cur_desc,cur_list_height,cur_desc_height;this.reset=function(section){cur_list=section.parents("."+rel_scrolled_class).eq(0);cur_desc=cur_list.siblings("."+scrolled_class).eq(0);if(!cur_list.length||!cur_desc.length){return false}cur_list_height=cur_list.height();cur_desc_height=cur_desc.height();if(cur_list_height<=cur_desc_height){cur_desc.css({transition:"margin .4s","margin-top":"0px"});cur_desc.one(transition_end,function(){$(this).removeAttr("style")})}if(parseInt(cur_desc.css("margin-top"))+cur_desc_height>=cur_list_height){$("html, body").animate({scrollTop:((cur_list.offset().top+cur_list_height)-cur_desc_height)+"px"},400)}}}var addScroll=new addScrollDesc();addScroll.init()};actions.configEquipment=function(){var equipmentUnutClass="unit-equipment",equipmentSwitchClass="unit-equipment__switch",equipmentSwitch=$("#unit-equipment__switch1, #unit-equipment__switch2, #unit-equipment__switch3"),equipmentUnutBtnPlusClass="unit-equipment__btn_plus",equipmentUnutBtnMinusClass="unit-equipment__btn_minus",equipmentUnutBtnNumberClass="unit-equipment__number",equipmentUnutBtnPlus=$("."+equipmentUnutBtnPlusClass),equipmentUnutBtnMinus=$("."+equipmentUnutBtnMinusClass);equipmentSwitch.each(function(){if($(this).prop("checked")){$(this).trigger("ifChecked")}})};actions.dataSelectOpt=function(){var wrapers=$("[data-selectopt-totext--wrap]");wrapers.each(function(){var $elem=$(this),$ElemSelect=$elem.find("[data-selectopt-totext]"),$TargetTextBlock=$elem.find("[data-selectopt-totext--target]"),TargetTextDefaultClass=$TargetTextBlock.attr("class");var changeAction=function(select){var selectedOpt=$("option:selected",select),selectedOptClasses=selectedOpt.attr("data-selectopt-totext--addclass")||"";$TargetTextBlock.attr("class",TargetTextDefaultClass+" "+selectedOptClasses).text(selectedOpt.val())};changeAction($ElemSelect);$ElemSelect.on("change",function(){changeAction(this)})})};var initDatePick=function($elems){$.datepick.defaultRenderer.picker='<div class="datepick"><div class="datepick-nav">{link:prev}{link:next}</div>{months}{popup:start}<div class="datepick-ctrl">{link:clear}{link:today}{link:close}</div>{popup:end}<div class="datepick-clear-fix"></div></div>';var PluginDatepickOpt=$.datepick.defaultOptions;PluginDatepickOpt.prevText="";PluginDatepickOpt.nextText="";PluginDatepickOpt.dateFormat="d M yyyy";PluginDatepickOpt.minDate=new Date();PluginDatepickOpt.onShow=function(picker){picker.find("select").selectric()};$elems.each(function(i){var strmainclass=$(this).attr("class").match(/\binput-datepick-[\w-]*\b/ig);$(this).datepick({pickerClass:(strmainclass)?strmainclass[0]:"",showTrigger:(strmainclass)?'<i class="'+strmainclass[0]+'__img-trigger"></i>':""})})};var dependentScrolledBlock=(function(){var BlocksList=[],DefOption={ElemsSelector:".js-desctop-scrolled-block",$elem:undefined,SelectorParentWrap:"",$ParentElem:undefined,SelectorLimitElem:".js-desctop-ref-to-scrolled-block",$ElemsRelation:undefined,CurentOffsetTop:0,Inited:true,ZeroPosTop:0,CurentHeight:undefined,MaxPozTop:undefined,InitalPozTop:undefined,CssPropTop:"margin-top",TransitionIsStarded:true,isScrolled:false,AnimateSpeed:500},EventsTransitionEnd=window.transition_end,$pageScrolledElem=$(window),WinScrollTop,IsSetScrollHandler=false,isTransition=Modernizr.csstransitions;var $singlepagenav=$(".singlepagenav");var _self=this;_self.is_pgnav=$singlepagenav.eq(0).length;_self.pgnav_height=0;if(_self.is_pgnav){_self.pgnav_height=$singlepagenav.outerHeight(false)}var pageSscrolled=function(){IsSetScrollHandler=true;$pageScrolledElem.on("scroll.dependentScrolledBlock",function(){WinScrollTop=$pageScrolledElem.scrollTop();BlocksList.forEach(function(ThisBlockOpt){if(ThisBlockOpt.Inited){var Delta=WinScrollTop-ThisBlockOpt.$ElemsRelation.offset().top;if(Delta>=0){var ElemHeight=ThisBlockOpt.$elem.outerHeight(false),RelationHeight=ThisBlockOpt.$ElemsRelation.outerHeight(false);if((ElemHeight+Delta)<RelationHeight){ThisBlockOpt.$elem.css(ThisBlockOpt.CssPropTop,(Delta+_self.pgnav_height)+ThisBlockOpt.MaxPozTop);if(!ThisBlockOpt.isScrolled){ThisBlockOpt.isScrolled=true}}else{if(ThisBlockOpt.isScrolled||ThisBlockOpt.CurentHeight!=ElemHeight){if(RelationHeight>ElemHeight){ThisBlockOpt.$elem.css(ThisBlockOpt.CssPropTop,RelationHeight+ThisBlockOpt.MaxPozTop-ElemHeight)}ThisBlockOpt.CurentHeight=ElemHeight;ThisBlockOpt.isScrolled=false}}}else{if(ThisBlockOpt.isScrolled){ThisBlockOpt.$elem.css(ThisBlockOpt.CssPropTop,ThisBlockOpt.MaxPozTop);ThisBlockOpt.isScrolled=false}}}})})};var preCalculate=function(ThisBlockOpt){if(ThisBlockOpt.InitalPozTop===undefined){ThisBlockOpt.InitalPozTop=ThisBlockOpt.$elem.css(ThisBlockOpt.CssPropTop)}ThisBlockOpt.$ElemsRelation=(ThisBlockOpt.$ParentElem=ThisBlockOpt.$elem.parents(ThisBlockOpt.SelectorParentWrap).eq(0)).find(ThisBlockOpt.SelectorLimitElem).eq(0);ThisBlockOpt.MaxPozTop=ThisBlockOpt.$ElemsRelation.offset().top-ThisBlockOpt.$ParentElem.offset().top;return ThisBlockOpt};var AnimationIn=function(ThisBlockOpt){if(ThisBlockOpt.Inited){var $ThisElem=ThisBlockOpt.$elem,InitalPosTop=ThisBlockOpt.InitalPozTop,MaxPozTop=ThisBlockOpt.MaxPozTop,CssProp=ThisBlockOpt.CssPropTop;$ThisElem.css(CssProp,InitalPosTop);if(InitalPosTop.slice(0,-2)!==MaxPozTop){if(isTransition){$ThisElem.css("transition",CssProp+" "+(ThisBlockOpt.AnimateSpeed/1000).toFixed(1)+"s ease-in-out").css(CssProp);$ThisElem.css(CssProp,MaxPozTop)}else{noCssTransitionAnim($ThisElem,CssProp,MaxPozTop)}$ThisElem.on(EventsTransitionEnd,function(){ThisBlockOpt.TransitionIsStarded=false;$ThisElem.css({transition:""}).off(EventsTransitionEnd)})}else{$ThisElem.css(CssProp,MaxPozTop)}}};var AnimationOut=function(ThisBlockOpt){var $ThisElem=ThisBlockOpt.$elem;if(isTransition){$ThisElem.css({transition:ThisBlockOpt.CssPropTop+" "+(ThisBlockOpt.AnimateSpeed/1000).toFixed(1)+"s ease-in-out"});$ThisElem.css(ThisBlockOpt.CssPropTop,ThisBlockOpt.ZeroPosTop)}else{noCssTransitionAnim($ThisElem,ThisBlockOpt.CssPropTop,ThisBlockOpt.ZeroPosTop)}ThisBlockOpt.TransitionStarded=true;$ThisElem.on(EventsTransitionEnd,function(){ThisBlockOpt.TransitionStarded=false;$ThisElem.css({transition:""}).off(EventsTransitionEnd)})};var ifTranzitionStardedSetTimeOut=function(ThisBlockOpt,callBack){setTimeout(callBack,(ThisBlockOpt.TransitionStarded)?ThisBlockOpt.AnimateSpeed:0)};var refreshOption=function(ThisBlockOpt,opt,$elem){for(var key in opt){if(key in ThisBlockOpt){ThisBlockOpt[key]=opt[key]}}ThisBlockOpt.$elem=$elem;return ThisBlockOpt};var SetNewOption=function(Number,opt,$elem){var ThisOpt=BlocksList[Number]={};for(var key in DefOption){ThisOpt[key]=(key in opt)?opt[key]:DefOption[key]}$elem.data("scrolled-block",Number);ThisOpt.$elem=$elem;return ThisOpt};var delOption=function(Number){BlocksList[Number].$elem.removeData("scrolled-block");BlocksList.splice(Number,1);for(var i=Number;i<BlocksList.length;i++){BlocksList[i].$elem.data("scrolled-block",i)}return BlocksList};var noCssTransitionAnim=function(elem,cssprop,data){var pos=parseInt(elem.css(cssprop)),s;if(data>pos){s="+=";data=data-pos}else{s="-=";data=pos-data}elem.animate({"margin-top":s+data+"px"},{queue:false,duration:DefOption.AnimateSpeed})};var dependentElem=function($elem,Number){var ThisBlockOpt=BlocksList[Number];if(mq()!==1){ThisBlockOpt.Inited=false;ThisBlockOpt.$elem.css(ThisBlockOpt.CssPropTop,ThisBlockOpt.ZeroPosTop)}else{ThisBlockOpt.Inited=true;$pageScrolledElem.trigger("scroll.dependentScrolledBlock")}};var getElemNumber=function($elem){var Number=$elem.data("scrolled-block");if((Number^0)===Number){return Number}else{return -1}};var initElem=function($elem,Number,opt){var ThisBlockOpt,IsNew=false;if(~Number){ThisBlockOpt=refreshOption(BlocksList[Number],opt,$elem)}else{Number=BlocksList.length;IsNew=true;ThisBlockOpt=SetNewOption(Number,opt,$elem)}ifTranzitionStardedSetTimeOut(ThisBlockOpt,function(){AnimationIn(preCalculate(ThisBlockOpt));if(IsNew&&!IsSetScrollHandler){pageSscrolled()}});return Number};var removeElem=function($elem,opt){var Number=getElemNumber($elem);if(~Number){var ThisOptinons=refreshOption(BlocksList[Number],opt,$elem);AnimationOut(ThisOptinons,$elem);if(!delOption(Number).length){$pageScrolledElem.off("scroll.dependentScrolledBlock");$(window).off("resize.dependentScrolledBlock");IsSetScrollHandler=false}}};var init=function(opt){webutils.flexboxtweenerRemove();if(opt===undefined){opt={}}var $elems=(opt.$elem)?opt.$elem:$(DefOption.ElemsSelector);$elems.each(function(){var $elem=$(this),Number=getElemNumber($elem);Number=initElem($elem,Number,opt);dependentElem($elem,Number);$(window).on("resize.dependentScrolledBlock",function(){dependentElem($elem,Number)})})};var remove=function(opt){if(opt===undefined){if(BlocksList.length){BlocksList.forEach(function(ThisOptinons,Number){AnimationOut(ThisOptinons,$(ThisOptinons.$elem));if(!delOption(Number).length){$pageScrolledElem.off("scroll.dependentScrolledBlock");$(window).off("resize.dependentScrolledBlock");IsSetScrollHandler=false}})}}else{var $elems=(opt.$elem)?opt.$elem:$(DefOption.ElemsSelector);$elems.each(function(){var $elem=$(this);removeElem($elem,opt)})}};return{init:init,remove:remove}})();actions.setBlocksNav=function(el){el=el||false;if(!el){var hash=webutils.getHashByKey("block-nav"),active=$(".js-set-nav[data-set-target]");active.each(function(){$($(this).attr("data-set-target")).removeClass("hidden-elem")});if(!hash){return false}set_name=hash;el=$('.js-set-nav[data-set-item="'+set_name+'"]').eq(0)}var target_id=el.attr("data-set-target"),target=$(target_id);if(!target.length){return false}var el_type=el.attr("type");if(el_type===undefined){el_type=el.prop("tagName").toLowerCase()}el.setMod("active").siblings(".js-set-nav").delMod("active");var set_name=el.attr("data-set-item"),set=target.find("[data-set]");var result_filter,result_num;switch(el_type){case"checkbox":var is_checked=el.is(":checked");if(is_checked){var set_target;switch(set_name){case"all":var set_group=el.data("set-group");$('[data-set-group = "'+set_group+'"]').not(el).each(function(){$(this).iCheck("uncheck").prop("checked",false).removeAttr("checked")});set.removeClass("none-elem");resetSelectFilters();ifEmpty(result_filter,true);break;default:var filter_all=$('.js-set-nav[data-set-item="all"]').eq(0);if(filter_all.is(":checked")){filter_all.iCheck("uncheck").prop("checked",false).removeAttr("checked")}set_target=set.filter('[data-set = "'+set_name+'"]');if(!set_target.is(":visible")){set_target.removeClass("none-elem")}var unchecked_filters=getUncheckedFilters();var filters_num=unchecked_filters.length;if(filters_num){var i;for(i=0;i<filters_num;i++){set.filter('[data-set = "'+unchecked_filters[i].data("set-item")+'"]').addClass("none-elem")}}result_filter=set_target.filter(":visible");var group_filters=$("select.js-set-nav").filter('[data-filter-group="sel"]');resetSelectFilters(group_filters);ifEmpty(result_filter);break}}else{set_target=set.filter('[data-set = "'+set_name+'"]');if(set_target.is(":visible")){set_target.addClass("none-elem")}if(set_name!=="all"){result_filter=set_target.filter(":visible");if(!getCheckedFilters().length){ifEmpty(result_filter)}}}break;case"select":var filter=el.val();var filter_data=el.data("set-item");var filter_items,filter_item;switch(filter){case"all":filter_items=$("[data-set-"+filter_data+"]");var checked_filters=getCheckedFilters();var units;var filters_num=checked_filters.length;if(!filters_num){ifEmpty(result_filter)}else{if(checked_filters[0].data("set-item")==="all"){set.removeClass("none-elem");units=set}else{var i;for(i=0;i<filters_num;i++){set.filter('[data-set = "'+checked_filters[i].data("set-item")+'"]').removeClass("none-elem")}}}var group_filters=$("select.js-set-nav").filter('[data-filter-group="sel"]');resetSelectFilters(group_filters);break;default:var group_name=el.data("filter-group");units=target.find("[data-set]").filter(":visible");units.removeClass("none-elem");filter_items=units.filter("[data-set-"+filter_data+"]");filter_item=filter_items.filter(function(){var data=$(this).data("set-"+filter_data).toString();if(data.indexOf(filter)>-1){return $(this)}});filter_items.addClass("none-elem");filter_item.removeClass("none-elem");var group_filters=$("select.js-set-nav").filter('[data-filter-group="'+group_name+'"]').not(el);resetSelectFilters(group_filters);break}result_filter=filter_items.filter(":visible");ifEmpty(result_filter);break;default:switch(set_name){case"all":set.removeClass("none-elem");break;default:set.filter('[data-set != "'+set_name+'"]').addClass("none-elem");set.filter('[data-set = "'+set_name+'"]').removeClass("none-elem");break}result_filter=set.filter(":visible");ifEmpty(result_filter);break}var el_rows=target.find(".units-row");el_rows.each(function(){var $this=$(this);var visible_num=$this.find(".anv-unit:visible").length;if(!visible_num){$this.removeClass("section-block-divider")}else{$this.addClass("section-block-divider")}});function ifEmpty(result_filter,clear){clear=false||clear;if(clear){$("#data-set-alert").remove();return false}if(!result_filter){return false}if(!result_filter.length){showAlert()}else{$("#data-set-alert").remove();result_num=result_filter.filter(":visible").length;if(!result_num){showAlert()}}}function showAlert(){var alert_txt=target.data("set-alert");var alert_box=$("#data-set-alert");if(!alert_box.length){$('<p id="data-set-alert" class="content-p-4">'+alert_txt+"</p>").prependTo(target)}else{alert_box.prependTo(target)}}function resetSelectFilters(selects){selects=selects||false;if(selects&&selects.length){selects.each(function(){$(this).val(0).prop("selectedIndex",0).selectric("refresh")})}else{$("select.js-set-nav").prop("selectedIndex",0).selectric("refresh");$("select.js-set-nav").val(0).trigger("change.setnav")}}function getUncheckedFilters(){var filters=[];var $this;$("input.js-set-nav").each(function(){$this=$(this);if(!$this.is(":checked")){filters.push($this)}});return filters}function getCheckedFilters(){var filters=[];var $this;$("input.js-set-nav").each(function(){$this=$(this);if($this.is(":checked")){filters.push($this)}});return filters}};actions.setBlocksNav();$(".js-set-nav").on("click.setnav change.setnav ifChanged.setnav",function(e){e.preventDefault();actions.setBlocksNav($(this))});actions.oneFileUploadInit=function(){var FileUpload_StateDrop="file-upload_hover-drop",FileUpload_StateLoader="file-upload_loader",FileUpload_StateComplete="file-upload_complete",FileUpload_StateNoFocus="file-upload_no-focus",FileUpload_StateError="file-upload_error";$(".file-upload").each(function(i){var $ThisFileUpload=$(this),$DropZone=$ThisFileUpload.find(".file-upload__dropZone").eq(0),$InputFile=$ThisFileUpload.find(".file-upload__input").eq(0),$Progress=$ThisFileUpload.find(".file-upload__progress").eq(0),$InfoIn=$ThisFileUpload.find(".file-upload__info-in").eq(0),$StopUpload=$ThisFileUpload.find(".file-upload__stop").eq(0),$Desc=$ThisFileUpload.find(".file-upload__desc").eq(0),$ActiveElems=$DropZone.add($StopUpload),DefaultClasses=$ThisFileUpload.attr("class")+" ";$InfoIn.data("defText",$InfoIn.text());$Desc.data("defText",$Desc.text());$InputFile.fileupload({dataType:"json",url:"php/",dropZone:$DropZone,progressInterval:70,maxFileSize:700000,maxNumberOfFiles:1}).on("fileuploaddragover",function(e){$ThisFileUpload.attr("class",DefaultClasses+FileUpload_StateDrop)}).on("fileuploadadd",function(e,data){if($ThisFileUpload.data("openWindowSelectFile")){$ThisFileUpload.addClass(FileUpload_StateNoFocus);DefaultClasses+=FileUpload_StateNoFocus+" ";$(window).mousemove(function(){$ThisFileUpload.removeClass(FileUpload_StateNoFocus);var pos=DefaultClasses.indexOf(FileUpload_StateNoFocus),str1=DefaultClasses.substr(0,pos),str2=DefaultClasses.substr(pos+FileUpload_StateNoFocus.length+1);DefaultClasses=str1+str2;$ThisFileUpload.removeData("openWindowSelectFile");$(window).unbind("mousemove")})}$ActiveElems.off("mouseenter mouseleave");$InfoIn.text(data.files[0].name).data("CurentText","Прервать загрузку файла");$ThisFileUpload.attr("class",DefaultClasses+FileUpload_StateLoader);$Desc.data("filesize",(data.files[0].size/1000).toFixed()).text("загружается ("+$Desc.data("filesize")+" КБ)");$ActiveElems.on("mouseenter",function(){$ThisFileUpload.addClass(FileUpload_StateDrop);$InfoIn.data("prevText",$InfoIn.text());$InfoIn.text($InfoIn.data("CurentText"))}).on("mouseleave",function(){$InfoIn.text($InfoIn.data("prevText"));$ThisFileUpload.removeClass(FileUpload_StateDrop)}).on("click",function(){$InputFile.fileupload().fileupload("destroy");$Progress.width(0);$InfoIn.text($InfoIn.data("defText"));$Desc.text($Desc.data("defText"));$ThisFileUpload.attr("class",DefaultClasses);$DropZone.add($StopUpload).off("mouseenter mouseleave click")})}).on("fileuploadprogressall",function(e,data){$Progress.width(data.loaded/data.total*100+"%")}).on("fileuploaddone",function(e,data){$Desc.text("загружен ("+$Desc.data("filesize")+" КБ)");$InfoIn.data("CurentText","Удалить файл");$ThisFileUpload.attr("class",DefaultClasses+FileUpload_StateComplete)}).on("click",function(){$ThisFileUpload.data("openWindowSelectFile",true)})})};actions.floatBasket=function(){var f_basket=$("#float-basket");if(!f_basket.length){return}var opts=$("#user-opts"),basket=$("#basket"),f_basket_btn=f_basket.elem("btn-order"),float_point;if(!opts.length){opts=$(".p-section").eq(1)}var top_point=opts.offset().top-opts.outerHeight(true),bottom_point=basket.offset().top-basket.outerHeight(true);f_basket_btn.smoothScroll();$(window).on("scroll",function(){float_point=$("html").scrollTop();if(!float_point){float_point=$("body").scrollTop()}if(float_point>top_point&&float_point<bottom_point){f_basket.setMod("visible")}else{f_basket.delMod("visible")}})};actions.iptvVideoInstructions=function(){var previews=$(".js-yuotube-preview");var states_txt=["Просмотрено","Воспроизводится"];var state_label_class="yuotube-preview-label__txt";var $window=$(window);var iptv_instruct_frame=$("#yuotubeframe"),farme_pos=iptv_instruct_frame.offset().top;function setPreviewEvents(){previews.on("click",function(){var $this=$(this),$that,status_label,status_txt,id=$this.data("videoid");window.iptv_instruct_player.loadVideoById(id);previews.removeClass("is-active");$this.addClass("is-active");setFrameTitle($this);previews.not($this).each(function(){$that=$(this);status_label=$that.find("."+state_label_class),status_txt=$that.data("status");if(status_txt===undefined){status_label.remove()}else{status_label.text(status_txt)}});var scroll_pos=$window.scrollTop();if(scroll_pos>farme_pos){$("html, body").animate({scrollTop:farme_pos},400)}})}function setFrameTitle(el){$("#youtube-view-head").text(el.data("title"));$("#youtube-view-txt").text(el.data("desc"))}function getActiveVideo(){var active=previews.filter(".is-active");if(!active.length){active=previews.filter(":first-child")}return active}function setPreviewLabels(state,video){video=video||false;if(video){var active_video=video}else{active_video=getActiveVideo()}var state_label=$('<div class="yuotube-preview-label yuotube-preview-label__txt"></div>');var label=active_video.find("."+state_label_class);switch(state){case 1:case 3:if(label.length){label.text(states_txt[1])}else{state_label.text(states_txt[1]).appendTo(active_video)}break;case 0:if(Modernizr.localstorage){var id=active_video.data("videoid"),txt=states_txt[0];if(localStorage.getItem(id)===null){localStorage.setItem(id,true);label.text(txt)}else{if(label.length){label.text(txt)}else{state_label.text(txt).appendTo(active_video)}}active_video.data("status",txt)}break}}function setVideoInfo(){var id,$this;previews.each(function(){$this=$(this);id=$this.data("videoid");getVideoJson($this,id)});function getVideoJson(el,id){$.getJSON("https://www.googleapis.com/youtube/v3/videos?id="+id+"&key=AIzaSyABsIe0NiHILIP1V2NXnshkmrxnqa923r0&part=snippet,contentDetails,statistics,status&prettyprint=true&callback=?",function(data){console.log(data);var snippet=data.items[0]["snippet"];var title=snippet.title,desc=snippet.description;el.data({title:title,desc:desc});el.find("img").attr({src:snippet.thumbnails["medium"]["url"],alt:title});var duration=$('<div class="yuotube-preview-label yuotube-preview-label__time">'+YTDurationToSeconds(data.items[0]["contentDetails"]["duration"])+"</div>");var description_head=$('<h1 class=" content-head-18 content-head-18_ms">'+title+"</h1>");var description_txt=$('<p class="content-p-0 content-p-0_last">'+desc+"</p>");var description=$("<article></article>");description_head.appendTo(description);description_txt.appendTo(description);description.insertAfter(el);duration.appendTo(el);el.removeClass("hidden-elem")});if(Modernizr.localstorage){if(localStorage.getItem(id)!==null){setPreviewLabels(0,el)}}}var timeFormat=function(ms){function num(val){val=Math.floor(val);return val}var hours=ms/3600%24,minutes=ms/60%60,seconds=ms%60;var str="";if(num(hours)){str+=num(hours)+":"}if(!!num(minutes)){str+=num(minutes)+":"}if(!!num(seconds)){str+=num(seconds)}return str};function YTDurationToSeconds(duration){var match=duration.match(/PT(\d+H)?(\d+M)?(\d+S)?/);var hours=(parseInt(match[1])||0);var minutes=(parseInt(match[2])||0);var seconds=(parseInt(match[3])||0);var total_seconds=hours*3600+minutes*60+seconds;return timeFormat(total_seconds)}}return{setInfo:setVideoInfo,getActive:getActiveVideo,setEvents:setPreviewEvents,setFrameTitle:setFrameTitle,updateStatus:setPreviewLabels}};var iptv_instruct_frame=$("#yuotubeframe");if(iptv_instruct_frame.length){actions.iptvVideoInstructions().setInfo();var tag=document.createElement("script");tag.src="https://www.youtube.com/iframe_api";var firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag);var iptv_instruct_player;function onYouTubeIframeAPIReady(){var video=actions.iptvVideoInstructions().getActive(),id=video.data("videoid");iptv_instruct_player=new YT.Player("yuotubeframe",{videoId:id,playerVars:{autoplay:0,rel:0,showinfo:0},events:{onReady:onInstructPlayerReady,onStateChange:onPlayerStateChange}})}function onInstructPlayerReady(event){var video=actions.iptvVideoInstructions().getActive();actions.iptvVideoInstructions().setFrameTitle(video);actions.iptvVideoInstructions().setEvents()}function onPlayerStateChange(event){actions.iptvVideoInstructions().updateStatus(event.data)}}$(".left-panel__level2").liveFilter(".location__search-input","li",{filterChildSelector:"a"});actions.mfpScrolledBlocks=function(opt){var default_opt={rel_block:".js-mfp-relscroll",scroll_block:".js-mfp-scroll"};if(opt!==undefined){if(opt.rel_block){default_opt.rel_block=opt.rel_block}if(opt.scroll_block){default_opt.scroll_block=opt.scroll_block}}var $rel_block=$(default_opt.rel_block);var $scroll_block=$(default_opt.scroll_block);if(!$rel_block.length||!$scroll_block.length){return false}var scroll_block_height=$scroll_block.outerHeight(true),rel_block_height=false;var $mfp_wrap=$rel_block.parents(".mfp-wrap").eq(0);var scroll_block_pos=Math.ceil($scroll_block.position().top);var scroll_pos=$mfp_wrap.scrollTop();function setPos(pos){rel_block_height=$rel_block.height();if(pos>scroll_block_pos&&getMarginTop($scroll_block)+scroll_block_height<rel_block_height){$scroll_block.css("margin-top",(pos-scroll_block_pos)+"px")}}function getMarginTop(el){return parseInt(el.css("margin-top"))}$mfp_wrap.on("scroll.mfpScroll",function(){scroll_pos=$(this).scrollTop();setPos(scroll_pos)})};actions.mobileMenuSecondLevelOpen=function(){var mobile_menu=$("#mobile-menu");$("#show-mobile-menu").on("click",function(e){e.preventDefault();mobile_menu.setMod("active");$(".modal-overlay").setMod("opacity","zero3").setMod("rightshift")})};actions.mobileMenu=function(){var mobile_menu=$(".mobile-menu"),link_container=mobile_menu.byMod("container","true").elem("link"),close=mobile_menu.elem("close"),level1=mobile_menu.eq(0);overlay.on("click.menu",function(e){if($(this).hasMod("rightshift")){var menu=mobile_menu.byMod("inner","active").last();if(!menu.length){menu=level1}closeMenuBar(menu)}});close.on("click.closelevel",function(){closeMenuBar($(this))});function closeMenuBar(menulevel){var menu=menulevel.block(),level=menu.index(".mobile-menu");if(level>=1){menu.delMod("inner","active");menu.delMod("active");mobileSidebarShift(level1,"right",true)}else{level1Close()}}function level1Close(){overlay.delMod("opacity","zero3").delMod("rightshift");level1.removeAttr("style").delMod("active")}function mobileSidebarClose(bar){level1Close();bar.delMod("inner","active")}$(window).on("orientationchange",function(){overlay.delMod("opacity","zero3").delMod("rightshift");mobileSidebarClose(mobile_menu)})};actions.modalAuthInit=function(){var user_login=$(".user-login"),button=user_login.elem("link"),modal_top_pos=false,auth=false;if(button.hasMod("auth","true")){modal_top_pos=auth=true}button.magnificPopup({preloader:true,type:"inline",closeBtnInside:true,showCloseBtn:false,fixedContentPos:false,alignTop:modal_top_pos,callbacks:{beforeOpen:function(){this.bgOverlay.setMod("topshadow")},open:function(){if(auth){var login=this.content,head=$(".p-head").elem("action-box").eq(0);function loginFormPos(el){var offset=head.offset(),top=offset.top,head_width=Math.floor(head.width()),login_width=Math.floor(el.innerWidth()),left=(Math.floor(offset.left)+head_width)-login_width;el.offset({top:top,left:left})}loginFormPos(login);$(this.ev).on("click.mfphide",function(){$.magnificPopup.close()});$(window).resize(function(){loginFormPos(login)})}},close:function(){this.content.removeAttr("style");$(this.ev).off("click.mfphide")}}});$(".modal-form-close").on("click",function(){$.magnificPopup.close()})};(function(){$(".js-order").each(function(){var el=$(this),targ=el.find(".order__service-ico");el.find("input.js-order-check").on("ifChanged",function(){if($(this).prop("checked")){targ.addClass("order__service-ico_active")}else{targ.removeClass("order__service-ico_active")}})})})();actions.pageSwiper=function(){var page_swiper=$(".js-page-swiper");var page_swiper_arr=[],page_swiper_left=[],page_swiper_right=[];page_swiper.each(function(index){page_swiper_left[index]=$(this).parents(".content-swiper").find(".swiper-out-arrow-left").eq(0);page_swiper_right[index]=$(this).parents(".content-swiper").find(".swiper-out-arrow-right").eq(0);var $this;if(!this.id){var rand_id="slider"+getRandomArbitary();this.id=rand_id;$this=$("#"+rand_id)}else{$this=$("#"+this.id)}var slides_per_view_custom=$this.data("slides-num");var set_pagination=$this.data("pagination");var set_slide_width=true;if(slides_per_view_custom===undefined){slides_per_view_custom="auto"}else{set_slide_width=false}page_swiper_arr[index]=$this.swiper({mode:"horizontal",slidesPerView:slides_per_view_custom,speed:400,simulateTouch:false,cssWidthAndHeight:set_slide_width,resizeReInit:true,createPagination:true,paginationClickable:true,onFirstInit:function(swiper){if($this.attr("data-equal-slide-width")==="true"){var vis_slides=parseInt($this.attr("data-visible-slides-num")),slides_offset=parseInt($this.attr("data-slide-offset"));if(!isNaN(vis_slides)&&!isNaN(slides_offset)){slidesSetEqualWidth(swiper,vis_slides,slides_offset)}}if($this.attr("data-equal-slide-height")==="true"){var slide_height=getHighestElem($this,$(swiper.slides).children(),false);$(swiper.slides).children().height(slide_height)}initSetWidthNav($this,swiper,index);if($this.attr("data-reset-onload")==="true"){reloadWrpapperSize(swiper,index)}if(set_pagination){swiper.params.pagination=".swiper-pagination";setTimeout(swiper.updatePagination,400)}},onInit:function(swiper){initSetWidthNav($this,swiper,index)},onSlideChangeStart:function(swiper){checkPrevNext(swiper,index)}})});$.each(page_swiper_right,function(i,val){val.on("click",function(){page_swiper_arr[i].swipeNext()})});$.each(page_swiper_left,function(i,val){val.on("click",function(){page_swiper_arr[i].swipePrev()})});function initSetWidthNav(wrap,swiper,index){var init_persentage=wrap.attr("data-width-percentage");if(init_persentage!==undefined){var vis_slides=parseInt(wrap.attr("data-visible-slides-num"));if(mq()>=slidesViewToMq(vis_slides)){wrap.attr("data-width-percentage","false").removeClass("swiper-adaptive")}else{wrap.attr("data-width-percentage","true").addClass("swiper-adaptive")}initSlidesWidthPersentage(swiper)}checkPrevNext(swiper,index)}function checkPrevNext(swiper,index,hide){if(!swiper.initialized){swiper.initialized=true;swiper.updateActiveSlide()}hide=hide||false;if(hide){page_swiper_right[index].removeClass("is-active");page_swiper_left[index].removeClass("is-active");return false}$(swiper.wrapper).one(transition_end,function(){var goal=Math.abs(swiper.getWrapperTranslate());if(swiper.snapGrid.indexOf(goal)===-1){var closest=swiper.snapGrid.reduce(function(prev,curr){return(Math.abs(curr-goal)<Math.abs(prev-goal)?curr:prev)});if(swiper.snapGrid.indexOf(closest)){swiper.setWrapperTranslate(-closest,0,0)}}});var f_slide=$(swiper.getFirstSlide()),l_slide=$(swiper.getLastSlide()),vis_class=swiper.params.slideVisibleClass;if(!f_slide.hasClass(vis_class)&&!l_slide.hasClass(vis_class)){page_swiper_right[index].addClass("is-active");page_swiper_left[index].addClass("is-active")}else{if(f_slide.hasClass(vis_class)&&!l_slide.hasClass(vis_class)){page_swiper_left[index].removeClass("is-active");page_swiper_right[index].addClass("is-active")}else{if(!f_slide.hasClass(vis_class)&&l_slide.hasClass(vis_class)){page_swiper_left[index].addClass("is-active");page_swiper_right[index].removeClass("is-active")}else{page_swiper_right[index].removeClass("is-active");page_swiper_left[index].removeClass("is-active")}}}}function slidesViewToMq(v){var mq;switch(v){case 4:mq=2;break;case 3:mq=3;break}return parseInt(mq)}function reloadWrpapperSize(swiper,index){$(window).on("load",function(){var slide_height=getHighestElem($(swiper.wrapper),$(swiper.slides).children(),false);swiper.updateActiveSlide();$(swiper.wrapper).height(slide_height);initSetWidthNav($(swiper.container),swiper,index)})}function initSlidesWidthPersentage(swiper){var container=$(swiper.container),vis_slides=parseInt(container.attr("data-visible-slides-num")),slides=container.find("."+swiper.params.slideClass),unit_tariff=slides.children(".unit-tariff");container.data("mq",mq());function setCSS(){if(mq()>=slidesViewToMq(vis_slides)){slides.delMod("view","adaptive").removeAttr("style");unit_tariff.delMod("view","adaptive")}else{unit_tariff.setMod("view","adaptive");slidesSetPersentageWidth(swiper,vis_slides,slides)}}setCSS();$(window).on("resize.pageswiper orientationchange.pageswiper",function(){if(parseInt(container.data("mq"))!==mq()){setCSS();container.data("mq",mq());if(typeof actions.offerSVGTriangle==="function"){actions.offerSVGTriangle()}}});unit_tariff.setMod("visible")}function slidesSetPersentageWidth(swiper,vis_slides,slides){var container_width=$(swiper.container).width();var temp_width=container_width/vis_slides;$(swiper.wrapper).width(container_width);slides.css("width",temp_width.toFixed(3)+"px")}function slidesSetEqualWidth(swiper,visnum,offsetnum){var slides=$(swiper.slides);var swiper_width=swiper.width;var slide_width=Math.ceil(swiper_width/visnum);if(slide_width>=190){slides.width(slide_width)}else{slides.width(190)}slides.removeClass("hidden-elem")}function returnSlider(index){index=parseInt(index);if(index>=0){return page_swiper_arr[index]}return page_swiper_arr}return{slider:returnSlider}};actions.addSlide=function(swiper_id,slide){var swiper_el=$("#"+swiper_id);if(!swiper_el.length||!slide.length){return false}var swiper=swiper_el.data().swiper;var slides_num=swiper.slides.length;swiper.appendSlide(slide);if(slides_num>=4){var i;for(i=0;i<swiper.slides.length;i++){$(swiper.slides[i]).removeAttr("style").delMod("view","adaptive").find(".unit-tariff").delMod("view","adaptive")}$(swiper.container).removeClass("swiper-adaptive").removeAttr("data-width-percentage").removeAttr("data-visible-slides-num")}else{$(swiper.container).attr("data-visible-slides-num",swiper.slides.length)}swiper.reInit()};$(function(){$("#test-phone2").on("change keyup",function(){$el=$(this);if($el.val().length>=4){$el.parents("#test-phone").find(".button-disabled").removeClass("button-disabled")}else{$el.parents("#test-phone").find(".button-disabled").addClass("button-disabled")}});$("#test-phone").on("submit",function(){var $el=$(this);if($("#test-phone2").val()==="2510069"){$el.find(".test-phone__respond-phone").html("("+$("#test-phone1").val()+") "+$("#test-phone2").val()).parents(".test-phone__respond-true").slideDown(300).siblings().slideUp(300)}else{$el.find(".test-phone__respond-phone").html("("+$("#test-phone1").val()+") "+$("#test-phone2").val()).parents(".test-phone__respond-true").slideDown(300).siblings().slideUp(300)}return false});$(".test-phone__reset").on("click",function(){$(this).parents("#test-phone").find(".test-phone__button").addClass("button-disabled").end().find(".test-phone__inputs").slideDown(300).siblings().slideUp(300);$(this).parents("#test-phone")[0].reset();return false});$(".test-phone__button").on("click",function(e){if($(this).hasClass("button-disabled")){return false}})});actions.showPromoBlock=function(){var StartedHideAction;var showAction=function(){if(!StartedHideAction){$(this).addClass("promo-action_full-overlay").css({}).addClass("promo-action_active").removeClass("promo-action_passive");StartedHideAction=undefined}};var hideAction=function(){if(StartedHideAction===undefined){StartedHideAction=true;var $this=$(this);$this.addClass("promo-action_passive").removeClass("promo-action_active").children(".promo-action__wrap").on(transition_end,function(){$this.parent().removeClass("promo-action_full-overlay").css({}).end().off(transition_end);StartedHideAction=false});if(ie_ver()<=9){$this.removeClass("promo-action_full-overlay")}}else{StartedHideAction=undefined}};$(".promo-action").on("mouseleave",hideAction).on("mouseenter",showAction).on("touchend",function(){if($(this).hasClass("promo-action_passive")){showAction.apply(this)}else{hideAction.apply(this)}});var $action_lbl=$(".js-inbox-offer-lbl");$action_lbl.hover(function(){var $action_body=$(this).parent(".js-inbox-offer").find(".js-inbox-offer-body").eq(0);$action_body.addClass("is-visible")},function(){var $action_body=$(this).parent(".js-inbox-offer").find(".js-inbox-offer-body").eq(0);$action_body.removeClass("is-visible")});$action_lbl.on("touchend",function(){var $action_body=$(this).parent(".js-inbox-offer").find(".js-inbox-offer-body").eq(0);if($action_body.hasClass("is-visible")){$action_body.removeClass("is-visible")}else{$action_body.addClass("is-visible")}})};actions.offerSVGTriangle=function(){var $svgroot=$(".js-offer-svg-triangle");if(!$svgroot.length){return false}var $container,$triangle,$that,mode;var svg_size;$svgroot.each(function(){$that=$(this);$container=$that.parents(".js-inbox-offer");mode=$that.data("mode")||"hor";switch(mode){case"hor":svg_size=$container.outerHeight(true);$that.css("left","-"+svg_size+"px");break;case"ver":svg_size=$container.outerWidth(true)+$container.find(".js-inbox-offer-body").outerHeight(true);$that.css({top:"0",left:"-"+$container.find(".js-inbox-offer-body").outerHeight(true)+"px"});break}$that.attr({width:svg_size,height:svg_size});$triangle=$that.children("polygon");$triangle.attr("points","0,0 "+svg_size+",0 "+svg_size+","+svg_size)})};actions.notifyBar=function(){var notify=$(".notify-bar");if(!notify.length){return{closeBar:function(){return undefined}}}var close=notify.elem("close"),triggeryes=notify.elem("triggeryes"),triggerno=notify.elem("triggerno");var closeBar=function(btn){if(btn===undefined){btn=close}var block=$(btn).block(),next_block=block.next().filter(notify);if(next_block.length){next_block.setMod("state","on");block.delMod("state","on")}else{block.delMod("state","on")}};close.on("click",function(){closeBar(this)});triggeryes.on("click",function(){closeBar(this)});triggerno.on("click",function(){$(this).block().delMod("state","on");setTimeout(function(){if($(".location-label").length){$(".location-label").trigger("click")}},300)});return{closeBar:closeBar}};actions.selectLocation=function(){var location=$(".location-top").eq(0),mobile_location=$(".location").eq(0);if(!location.length||!mobile_location.length){return false}var search=location.first().elem("inputsearch"),searchwrap=location.first().elem("searchwrap"),helpsearch=location.first().elem("helpsearch"),helptxt=location.first().elem("helptxt"),helplist=location.first().elem("helplist"),close=location.first().elem("close"),location_box=$(".location-box"),location_label=$(".location-label"),head_region=$("#region-btn");var level1=mobile_location.eq(0),mobile_location_close=mobile_location.elem("close"),mobile_location_item=mobile_location.elem("regions-item");var closeLocbox=function(e){if(!$(e.target).closest(location_box).length||$(e.target).closest(close).length){location_box.delMod("state","on");location_label.delMod("state","on");head_region.delMod("state","on")}};close.on("click",closeLocbox);location_label.on("click",function(){var $this=$(this);if(mq()===1){if($this.hasMod("state","on")){$this.delMod("state","on");location_box.delMod("state","on")}else{$this.mod("state","on");location_box.mod("state","on")}}else{level1.setMod("active");overlay.setMod("opacity","zero3").setMod("leftshift")}actions.notifyBar().closeBar()});head_region.on("click",function(){var $this=$(this);if(mq()===1){if($this.hasMod("state","on")){$this.delMod("state","on");location_box.delMod("state","on")}else{$this.mod("state","on");location_box.mod("state","on")}}else{level1.setMod("active");overlay.setMod("opacity","zero3").setMod("leftshift")}actions.notifyBar().closeBar()});overlay.on("click.location",function(e){if($(this).hasMod("leftshift")){var menu=mobile_location.byMod("inner","active").last();if(!menu.length){menu=level1}closeLocationBar(menu)}});mobile_location_close.on("click.closelevel",function(){closeLocationBar($(this))});$(".location-expd").elem("search").on("click touchend",function(){$.smoothScroll({afterScroll:function(){search.focus()}})});$(".location-list").elem("link").on("click",function(){$(this).block().elem("link").delMod("state","act");$(this).mod("state","act")});function closeLocationBar(bar){var menu=bar.block(),level=menu.index(".location");if(level>=1){menu.delMod("inner","active");mobileSidebarShift(level1,"left",true)}else{level1Close()}}function level1Close(){overlay.delMod("opacity","zero3").delMod("leftshift");level1.removeAttr("style").delMod("active")}function mobileSidebarClose(bar){level1Close();bar.delMod("inner","active")}$(window).on("orientationchange",function(){overlay.delMod("opacity","zero3").delMod("rightshift");mobileSidebarClose(mobile_location)});location_box.on(transition_end,function(e){if(!$(this).hasMod("state","on")){$(document).off("click.hidelocbox",closeLocbox)}else{$(document).on("click.hidelocbox",closeLocbox)}})};actions.s_offices=(function(){var activatePopupItem=$(".s-offices__item"),closePopupItem=activatePopupItem.find(".p-send-sms__close");return{initpopup:function(){activatePopupItem.magnificPopup({type:"inline",closeBtnInside:true,showCloseBtn:false,callbacks:{beforeOpen:function(){this.bgOverlay.setMod("topshadow")}}});closePopupItem.on("click",function(){$.magnificPopup.close()})}}}().initpopup);var scrollListToItem=function($parentElem,$item){var destination=$parentElem.scrollTop()+$item.position().top-$parentElem.outerHeight(false)/2-$item.outerHeight(false)/2;$parentElem.animate({scrollTop:destination},1100)};$(".location-expd__cur-link").on("click",function(){var $wrap=$(".location-list:first");scrollListToItem($wrap,$wrap.find(".location-list__link_state-act"))});var yaSearchLayout=function(){var $wrap=$(".search-result>.units-row"),$clarificationRequest=$wrap.find(".b-menu__layout-vert"),$cloneList=$wrap.find(".search-result__paths-list-ya"),CloneListHtml="",NumResults=/(\d+)/.exec($wrap.find(".b-head__found").text())||[];$wrap.find(".search-result__number").text("Найдено "+NumResults[1]||0+" документов");$wrap.find(".search-result__clarification").removeClass("none-elem").on("click",function(){$wrap.find(".b-form-button__input").trigger("click")});$clarificationRequest.children().each(function(){var elem=$(this);CloneListHtml+='<li class="search-result__paths-list-item checked-'+elem.find("input").prop("checked")+'">'+elem.find("label")[0].outerHTML+"</li>"});$cloneList.append(CloneListHtml).children("li").each(function(){var elem=$(this).children("label"),elemText=elem.text();elem.html("<span>"+elemText+"</span>").prepend('<input type="checkbox">');if($(this).hasClass("checked-true")){elem.find("input").prop("checked",true)}elem.on("click",function(){$(this).children("input").prop("checked",function(i,val){return !val})})});$(".search-result__clarification-btn").on("click",function(e){e.preventDefault;$(".b-pseudo-link").trigger("click").parents(document).find(".b-specification-item__button").trigger("click")});function refreshWidthPaginate(){var Wrap=$(".b-pager__pages"),SummWidth=0,AllChild=Wrap.children().each(function(){SummWidth+=$(this).show().outerWidth(true)}),WrapWidth=Wrap.outerWidth(false),startId=1,endId=AllChild.length-2;if(mq()==4){startId=0;endId=AllChild.length-1}function recurse(CurrWidth){if(CurrWidth>WrapWidth){CurrWidth-=AllChild.eq(startId++).hide().outerWidth(true)+AllChild.eq(endId--).hide().outerWidth(true);recurse(CurrWidth)}else{return false}}recurse(SummWidth)}refreshWidthPaginate();$(window).on("resize",refreshWidthPaginate)};yaSearchLayout();var blockVerticalAdjust=(function(){var wrap=$(".js-vertical-adjust-wrap"),block;var verticalAdjust=function(){$(wrap).each(function(){block=$(this).find(".js-vertical-adjust-block").eq(0);h=block.outerHeight(false),hp=$(this).outerHeight(false);block.css("margin-top",(hp-h)/2+"px")})};verticalAdjust();$(window).on("resize",function(){verticalAdjust()})})();actions.seltargetChange=function(){var sel=$("select.js-data-sel");sel.on("change",function(){var $this=$(this),target=$this.parents(".config-choise").eq(0).find(".js-data-seltarget").eq(0);target.text($this.val())})};actions.singlePageNav=function(){if($(".singlepagenav").eq(0).length){webutils.flexboxtweenerRemove();var SinglePageNav=$(".singlepagenav").eq(0);var listPageNav=$(".js-pagenav, [data-pagenav]").map(function(indx,element){var LinkText=$(element).attr("data-pagenav")?$(element).attr("data-pagenav"):$(element).text();return'<a class ="singlepagenav__link" href="#'+$(element).attr("id")+'"><span>'+LinkText+"</span></a>"}).get().join("");var PositionPageNav=SinglePageNav.parent(".singlepagenav__skelet").position().top;$(document).scroll(function(){if($(document).scrollTop()>=PositionPageNav){SinglePageNav.addClass("fixed")}else{SinglePageNav.removeClass("fixed")}});SinglePageNav.find(".singlepagenav__nav").html(listPageNav).singlePageNav({offset:SinglePageNav.outerHeight(false)-1,easing:"linear"})}};actions.pageNav=function(){var pagenav=$(".js-set-pagenav");var nav_list=$(".js-set-pagenav-head").map(function(index,element){var link_text=$(element).attr("data-pagenav");if(link_text===undefined){link_text=$(element).text()}var list_link='<a class ="set-nav__item" href="#'+$(element).attr("id")+'">'+link_text+"</a>";return list_link}).get().join("");pagenav.html(nav_list).singlePageNav({offset:pagenav.outerHeight(false)-1,easing:"linear",currentClass:"set-nav__item_active-true"})};actions.mainNav=function(){var nav=$("#main-nav");if(!nav.length){return false}var items=nav.elem("item"),items_list=nav.elem("list").eq(0),active_item=items.byMod("act","item"),l2menu=items.find(".main-nav-l2");items.on({"mouseenter.mainnav":function(){showL2Menu($(this))},"mouseleave.mainnav":function(){hideL2Menu($(this))},"click.mainnav":function(e){var $this=$(this);switch(true){case (mq_break()===true):e.stopPropagation();showL2Menu($this);break;case (mq_break()===false):e.preventDefault();if($this.hasMod("active")){hideL2MobileMenu($this);return false}if(!items_list.hasMod("active")){showL2MobileMenu($this)}else{webutils.touchLinkRedirect($(e.target))}break}}});function showL2MobileMenu(el){var item_height=el.outerHeight(false);items_list.css("padding-top",item_height+"px").setMod("active");el.setMod("active")}function showL2Menu(el){var menu=el.find(l2menu).eq(0);if(!menu.length){return false}el.setMod("active");el.setMod("state","act");el.setMod("hover");menu.setMod("state","on");menu.find("li").on("click",function(e){e.stopPropagation()})}function hideL2Menu(el){el.delMod("state","act");el.delMod("hover");l2menu.delMod("state","on")}function hideL2MobileMenu(el){el.delMod("active");el.delMod("state","act");el.delMod("hover");items_list.delMod("active").removeAttr("style")}nav.on("mouseleave.mainnav",function(){if(mq_break()){return}items_list.delMod("active").removeAttr("style");active_item.delMod("active")});function mq_break(){var mq_break=false;if(webutils.windowSize().width>1000){mq_break=true}return mq_break}$(document).on("touchend.close-main-nav",function(e){if($(e.target).closest(items_list).length){return}hideL2Menu(items.byMod("state","act"));hideL2MobileMenu(items.byMod("state","act"));e.stopPropagation()});$(window).on("orientationchange resize",function(){hideL2Menu(items.byMod("state","act"));hideL2MobileMenu(items.byMod("state","act"));showHideDropdownArrow()});function showHideDropdownArrow(){if(!mq_break()&&!active_item.hasMod("hasmenu")){active_item.setMod("hasmenu").data("hasmenu","add");return}if(mq_break()&&active_item.data("hasmenu")==="add"){active_item.delMod("hasmenu").data("hasmenu",false)}}showHideDropdownArrow()};actions.mainNav();actions.siteSecondNavInit=function(){var second_nav=$("#site-second-nav"),second_nav_wrap=$("#main-menu-box");if(!second_nav.length){return false}var second_nav_link=second_nav.elem("link"),second_nav_item=second_nav.elem("item"),l2_block=$("#second-nav-l2");if(l2_block.length){var l2_wrap=l2_block.elem("wrap")}second_nav_wrap.on("mouseleave.closeNav",function(){delMarkers();closeMenu()});second_nav_item.on({"mouseenter.menu":function(){var $this=$(this);checkChangeMenuState($this)},touchend:function(e){var $this=$(this);if($this.data("l2")!==undefined){if($this.hasMod("hovermenu")){webutils.touchLinkRedirect($(e.target))}else{e.preventDefault();checkChangeMenuState($this)}}}});function checkChangeMenuState(current_elem){var $menu_id=$("#"+current_elem.data("l2"));if($menu_id.size()>0){var l2_menu=$menu_id;delMarkers();setItemMarker(current_elem);if(l2_block.hasMod("state","act")){l2_wrap.byMod("state","visible").delMod("state","visible");openMenu(l2_menu,current_elem)}else{l2_block.setMod("state","act");openMenu(l2_menu,current_elem)}}else{delMarkers();closeMenu()}}function openMenu(menu,point){menu.setMod("state","visible");var items=menu.elem("item"),items_length=items.length;items.setMod("num",items_length);if(items_length<3){l2_block.delMod("fullwidth");l2_block.css({left:point.position().left-(l2_block.width()/2-point.width()/2)+"px",margin:"0"})}else{l2_block.setMod("fullwidth");l2_block.removeAttr("style")}}function closeMenu(){l2_block.delMod("state","act");l2_wrap.delMod("state","visible")}function setItemMarker(item){item.find(second_nav_link).setMod("hovermenu");item.setMod("hovermenu")}function delMarkers(){second_nav_link.delMod("hovermenu");second_nav_item.delMod("hovermenu")}$(document).on("touchend.close-second-nav",function(e){if($(e.target).closest(l2_block).length||$(e.target).closest(second_nav_item).length){return}delMarkers();closeMenu()})};actions.secondNavEqualItems=function(){var second_nav=$("#site-second-nav");if(!second_nav.length){return false}var second_nav_item=second_nav.elem("item");var b2border=second_nav_item.filter(".second-nav__item_b2border");if(!b2border.length||mq()>1){return this}var equal_items=second_nav_item.filter(":visible").not(b2border),items_length=equal_items.length;if(items_length<=5){return}var relWid=1.26,item_width=Math.floor(second_nav.width()/(items_length+relWid));equal_items.each(function(){var $this=$(this);var temp_width=item_width;if($this.data("l2")){var txt_width=$this.find(".hovermenu-marker").eq(0).width();if(txt_width>85){temp_width=item_width+24}}$this.css("min-width",temp_width+"px")});b2border.css("min-width",item_width*relWid+"px");$(window).on("resize orientationchange",function(){if(mq()>1){equal_items.css("min-width","");b2border.css("min-width","")}})};$(document).on("ready",actions.secondNavEqualItems);var supportTabs=function(){var scroll=false;if(mq()>=3){scroll=true}var options={oneOpenedItem:true,openOnce:true,easing:false,scrollEasing:false,scrollToItem:scroll,itemClass:"adaptive-tabs__tab-content-wrap",headClass:"adaptive-tabs__tab-headbox",contentClass:"adaptive-tabs__tab-content"};$("#support-tabs").accordion(options)};supportTabs();actions.adaptiveTables=function(){function rowSpanable(wrap){wrap.find("[data-rowspan]").each(function(){var NRow=$(this).attr("data-rowspan"),ThisIndex=$(this).index();$(this).parents("tr").nextAll().each(function(ind){if(ind<(NRow-1)){$(this).find("td,th").eq(ThisIndex).hide().attr("data-rowspan-hide",true)}});$(this).attr("rowspan",NRow)})}function unRowSpanable(wrap){wrap.find("[data-rowspan]").removeAttr("rowspan");wrap.find("[data-rowspan-hide]").show().removeAttr("data-rowspan-hide")}function isArrayAllTrue(array){var L=array.length,i=0;if(!L){return false}while(i<L){if(!array[i]){return false}++i}return true}rowSpanable($(document));var OnceSwitchedScrollable=[],OnceSwitchedAdaptive=[];var updateTables=function(){if((mq()===3||mq()===4)&&!(isArrayAllTrue(OnceSwitchedScrollable)||isArrayAllTrue(OnceSwitchedAdaptive))){var $tables=$("[data-table]");$tables.filter("[data-table=scrollable]").each(function(i,element){if(!OnceSwitchedScrollable[i]){OnceSwitchedScrollable[i]=true;splitTable($(element))}});$tables.filter("[data-table=adaptive]").each(function(i,element){if(!OnceSwitchedAdaptive[i]){OnceSwitchedAdaptive[i]=true;$(element).stacktable({classes:{TblSmall:"tbl-all_s",TopRow:"js-toprow",AddToSmall:"mq-mobile-only_table",AddToLarge:"mq-hide-mobile"}})}});return true}};$(window).load(updateTables);$(window).on("redraw",function(){switched=false;updateTables()});$(window).on("resize",updateTables);function splitTable(original){original.wrap("<div class='tbl__wrapper' />");var copy=original.clone(),copy2=original.clone();copy.find("td:not(:first-child), th:not(:first-child)").css("display","none");original.closest(".tbl__wrapper").append(copy);copy.wrap("<div class='pinned mq-only-mobile' />");original.wrap("<div class='scrollable' />").closest(".scrollable").append(copy2);original.addClass("mq-hide-mobile");copy2.addClass("scrollable__tbl").removeAttr("data-table");setCellHeights(copy2,copy)}function setCellHeights(original,copy){unRowSpanable(original);var tr=original.find("tr"),tr_copy=copy.find("tr"),heights=[];tr_copy.each(function(index){var self=$(this),tx=self.find("th, td");tx.each(function(){var height=$(this).outerHeight(true);heights[index]=heights[index]||0;if(height>heights[index]){heights[index]=height}})});tr.each(function(index){var self=$(this),tx=self.find("th, td");tx.each(function(){var height=$(this).outerHeight(true);heights[index]=heights[index]||0;if(height>heights[index]){heights[index]=height}})});tr_copy.each(function(index){$(this).height(heights[index]).attr("data-s","1")});tr.each(function(index){$(this).height(heights[index]).attr("data-s","2")});rowSpanable(original)}return{updateTables:updateTables}};actions.tariffByHash=function(){function init(hash){var id=webutils.getHashByKey("tariff")||hash;if(id===undefined){return false}var tariffs=$(".js-tariffs-line"),active_tariff=$("#"+id),hidden_tariffs=tariffs.filter(":not(#"+id+")");var hidden_box_id="hidden-units-box";var hidden_box=$("<div/>",{id:hidden_box_id,"class":"section-divider none-elem"});var show_tariffs=$("<p/>",{"class":"showmore-link js-showbox js-switch-state",text:"Показать все пакетные предложения","data-href":"#"+hidden_box_id});active_tariff.after(hidden_box);hidden_tariffs.prependTo(hidden_box);hidden_box.before(show_tariffs)}return{init:init}};actions.configuratorSwiper=function(){var page_swiper=$(".js-iptv-swiper");var page_swiper_arr=[],page_swiper_left=[],page_swiper_right=[];page_swiper.each(function(index){page_swiper_left[index]=$(this).parents(".iptv-content-swiper").find(".swiper-out-arrow-left").eq(0);page_swiper_right[index]=$(this).parents(".iptv-content-swiper").find(".swiper-out-arrow-right").eq(0);page_swiper_arr[index]=$("#"+this.id).swiper({slideClass:"tariff-extnd",mode:"horizontal",slidesPerView:"auto",speed:400,simulateTouch:false,cssWidthAndHeight:true,resizeReInit:true,onInit:function(swiper){sliderSetNav(swiper,page_swiper_left[index],page_swiper_right[index]);$(swiper.wrapper).height($(swiper.slides).height())},onSlideNext:function(swiper){if(swiper.activeIndex+2>swiper.slides.length){page_swiper_right[index].removeClass("is-active")}else{page_swiper_right[index].addClass("is-active")}page_swiper_left[index].addClass("is-active")},onSlidePrev:function(swiper){if(swiper.activeIndex===0){page_swiper_left[index].removeClass("is-active")}page_swiper_right[index].addClass("is-active")}})});$.each(page_swiper_right,function(i,val){val.on("click",function(){page_swiper_arr[i].swipeNext()})});$.each(page_swiper_left,function(i,val){val.on("click",function(){page_swiper_arr[i].swipePrev()})});var sliderSetNav=function(swiper,left,right){if(getElemsWidth($(swiper.container),"."+swiper.params.slideClass)>(swiper.width+5)){right.addClass("is-active")}else{right.removeClass("is-active");left.removeClass("is-active")}};return{setNav:sliderSetNav}};actions.tariffsConfigurator=function(){var tariff_unit=$(".unit-tariff"),select_inp=tariff_unit.elem("connect-inp"),selects=tariff_unit.elem("sel"),select_inp_txt=tariff_unit.elem("connect-txt"),select_txt_arr=["Подключить","Настройте тариф"];var hash=webutils.getHash();if(hash.length){var active_btn=tariff_unit.elem("connect").filter('[data-desc-click="'+hash+'"]'),active_radio=active_btn.find(select_inp).eq(0);if(active_radio.length){active_btn.trigger("click.blockDesc");active_radio.prop("checked",true);var this_traiff=setActiveTariff(active_radio),this_slide=this_traiff.parent(".swiper-slide");if(this_slide.length&&!this_slide.hasClass("swiper-slide-visible")){var slider_index=$(".js-page-swiper").index(this_slide.parents(".js-page-swiper"));var slider=actions.pageSwiper().slider(slider_index);slider.swipeTo(this_slide.index())}}}selects.selectric({customClass:{prefix:"selectric0",postfixes:"Input Items Open Disabled TempShow HideSelect Wrapper Hover Responsive",camelCase:false}});if(!selects.hasClass("selectric0-wrapper")){selects.wrap('<div class="wrap-native"></div>')}select_inp.on("change",function(){setActiveTariff($(this));select_inp.each(function(){if(!$(this).is(":checked")){var text_elem=$(this).siblings(select_inp_txt),act_text=text_elem.attr("data-act-text"),default_text=text_elem.data("default-text");if(act_text!==undefined){text_elem.text(default_text)}else{text_elem.text(select_txt_arr[0])}$(this).parent().delMod("active");$(this).parent().block().delMod("selected")}})});select_inp.each(function(){setActiveTariff($(this))});function setActiveTariff(radio){var text_elem=radio.siblings(select_inp_txt),act_text=text_elem.attr("data-act-text");if(!radio.is(":checked")){return false}text_elem.data("default-text",text_elem.text());if(act_text!==undefined){text_elem.text(act_text)}else{text_elem.text(select_txt_arr[1])}var btn=radio.parent(),tariff=btn.block();btn.setMod("active");tariff.setMod("selected");var scroll_target=btn.data("scroll-target");var scroll_to=$("#"+scroll_target);if(scroll_target!==undefined&&scroll_to.length){webutils.scrollTo(scroll_to)}return tariff}};actions.thirdNavInit=function(){var third_nav=$(".third-nav").eq(0);if(!third_nav.length){return false}var link=third_nav.elem("item"),li=third_nav.elem("li");link.on("touchend",function(){window.location=$(this).attr("href")});li.on({mouseenter:function(){$(this).setMod("state","act");var menu=findMenu($(this));menu.setMod("state","on")},mouseleave:function(){$(this).delMod("state","act");var menu=findMenu($(this));menu.delMod("state","on")},touchstart:function(){$(this).off("mouseenter mouseleave");$(this).setMod("state","act")},touchend:function(){$(this).delMod("state","act")}});function findMenu(el){return el.find(".fourth-nav").eq(0)}};actions.tvProgram=function(){function daysSlider(){var wu_slider=$(".js-tvprog-slider");if(!wu_slider.length){return false}var hidden_class="none-elem";var wrap=wu_slider.find(".js-tvprog-slider-wrap").eq(0);var content=wrap.find(".js-tvprog-slider-content").eq(0);var prev=wu_slider.find(".js-tvprog-slider-prev").eq(0);var next=wu_slider.find(".js-tvprog-slider-next").eq(0);var slides=content.children(),first_slide=slides.filter(":first-child");first_slide.data("current",true);$(window).on("resize orintationchange",function(){var slide=currentSlide();slide.data("current","");first_slide.data("current",true);content.removeAttr("style");next.removeClass(hidden_class)});next.on("click.tvweek",goNext);prev.on("click.tvweek",goPrev);content.on(transition_end,function(){var $this=$(this);var last=slides.filter(":last-child");var pos=Math.abs($this.position().left);if(pos>0){prev.removeClass(hidden_class);next.removeClass(hidden_class)}else{if(pos<=0){prev.addClass(hidden_class)}}var slide=currentSlide();var slide_pos=slide.offset().left+slide.outerWidth(true);var dist=0;var dist_slides=slide.nextUntil(last);dist_slides.each(function(){dist+=$(this).outerWidth(true)});var end=wu_slider.offset().left+wu_slider.width();if((slide_pos+dist)+last.outerWidth(true)<=end){next.addClass(hidden_class)}});function currentSlide(){var slide=slides.filter(function(){return $(this).data("current")===true});return slide}function goNext(){var slide=currentSlide();var next=slide.next();if(!next.length){return}var shift=next.outerWidth(true);content.css("left",-(Math.abs(content.position().left)+shift));slide.data("current","");next.data("current",true)}function goPrev(){var slide=currentSlide();var prev=slide.prev();if(!prev.length){return}var shift=prev.outerWidth(true);content.css("left",-(Math.abs(content.position().left)-shift));slide.data("current","");prev.data("current",true)}}daysSlider();function showPrograms(){var head=$(".js-tvprog-head");if(!head.length){return false}var row_class="js-tvprog-row";var list_class="js-tvprog-list";var name_class="js-tvprog-name";var active_class="is-active";var hidden_class="hidden-elem";head.on("click",openCloseProgList);function openCloseProgList(){var $this=$(this);var cur_row=$this.parents("."+row_class).eq(0);var list=cur_row.find("."+list_class);if($this.hasClass(active_class)){cur_row.find("."+name_class).eq(0).removeClass(hidden_class);list.removeAttr("style");$this.removeClass(active_class);cur_row.removeClass(active_class)}else{cur_row.find("."+name_class).eq(0).addClass(hidden_class);list.cloneWidthHeight("height");$this.addClass(active_class);cur_row.addClass(active_class)}}}showPrograms();function comboboxActions(){var $filters=$(".pack-filter.js-tv-combo");var $pack_head=$filters.elem("head");var $lists=$filters.elem("list");$pack_head.on("click.tvcombo",function(){var $this=$(this);var $pack=$this.parent($filters).eq(0);var $cur_list=$lists.filter($pack.children());closeCombobox($pack.siblings(".js-tv-combo"),$lists);if($pack.hasMod("active","true")){closeCombobox($pack,$cur_list)}else{openCombobox($pack,$cur_list)}if(mq()>3){var lpos=$this.offset().left;if(lpos>0){$cur_list.css("left",-lpos+"px")}}else{$cur_list.removeAttr("style")}});function closeCombobox(filters,lists){filters.delMod("active");lists.removeClass("is-visible")}function openCombobox(filters,lists){filters.setMod("active");lists.addClass("is-visible")}$(document).click(function(e){if($(e.target).closest($lists).length||$(e.target).closest($filters).length){return}closeCombobox($filters,$lists);e.stopPropagation()})}comboboxActions()};actions.upButton=function(){var that=this;var $window=$(window);that.init=function(){var wh=webutils.windowSize().height;var dh=$(document).height();var scroll_point=wh*1.4;switch(true){case (dh>scroll_point):that.setBtn();that.setEvents(scroll_point);break;case (dh<=scroll_point):if($("#up-btn").length){that.showHideBtn("hide");$window.off("scroll.upbutton")}break}};that.setEvents=function(point){that.scroll(point);if($window.scrollTop()>point){that.showHideBtn("show")}};that.scroll=function(point){var scroll_pos;$window.on({"scroll.upbutton":function(){scroll_pos=$(this).scrollTop();if(scroll_pos>=point){that.showHideBtn("show")}else{that.showHideBtn("hide")}}})};that.scrollToTop=function(){$("html, body").animate({scrollTop:0},400)};that.setBtn=function(){if(!$("#up-btn").length){var btn=$("<div />",{id:"up-btn","class":"up-button",title:"Вверх",click:that.scrollToTop});btn.appendTo($("body"))}};that.showHideBtn=function(state){var $btn=$("#up-btn");switch(state){case"show":if($btn.hasClass("is-visible")){return false}$btn.addClass("is-visible");break;case"hide":if(!$btn.hasClass("is-visible")){return false}$btn.removeClass("is-visible");break}};that.init();$window.on("resize.upbutton",that.init)};var textSplitter=(function tSplitter(){var thisContainer,tOptions;return{init:function(splitter,prop){tOptions=prop||{clickCallback:function(){}};splitter.click(function(event){event.preventDefault();var newHeight=$(this).prev(".videoprokat-popup__shutter-text").outerHeight(false),deltaHeight;thisContainer=$(this).parents("."+$(this).attr("data-textsplitter"));thisContainer.height(newHeight).addClass("videoprokat-popup__shutter_open");deltaHeight=newHeight-thisContainer.height();if(mq()===2||mq()===1){tOptions.clickCallback(deltaHeight)}else{setTimeout(function(){tOptions.clickCallback()},1000)}})}}}());var videoprokat_minitabs=(function(){var items,$minitabs,$minitabsHeight=[],$curenttab,itemsHeight=[],ClassTabs="videoprokat-popup__tabs",ClassItem="videoprokat-popup__minitab-item",ClassItemDefault="videoprokat-popup__minitab-item_default",ClassItemOpened="videoprokat-popup__minitab-item_open",ClassHead="videoprokat-popup__minitab-head",ClassContent="videoprokat-popup__minitab-content",ClassAbs="videoprokat-popup__minitab-content-in-wrap";var MobileOn=false,DesctopOn=false;var showContent=function(item){var index=item.index(),item_content=item.children("."+ClassContent);item_content.height(0);$curenttab=item;item.addClass(ClassItemOpened);item_content.height(itemsHeight[index]);if(mq()===3||mq()===4){setTimeout(function(){item_content.css("min-height",itemsHeight[index]+"px");item_content.height("auto")},900)}if(mq()===2||mq()===1){$minitabs.parent().height(itemsHeight[index]);chapterDescScroll(item_content)}else{$minitabs.parent().height("auto")}},hideContent=function(item){if(mq()===2||mq()===1){item.each(function(){if($curenttab){$curenttab.children("."+ClassContent).height(itemsHeight[$curenttab.index()])}$(this).removeClass(ClassItemOpened);$minitabs.parent().height($minitabsHeight[$(this).index()])})}else{item.each(function(){if($curenttab){$curenttab.children("."+ClassContent).height(itemsHeight[$curenttab.index()])}$(this).removeClass(ClassItemOpened).children("."+ClassContent).height(0);$(this).children("."+ClassContent).removeAttr("style")})}},toggleItem=function(item){if((mq()===3||mq()===4)&&item.hasClass(ClassItemOpened)){hideContent(item)}else{ifComplite(function(){if($curenttab){hideContent($curenttab)}}).done(showContent(item))}},getItemHeight=function(thisElem,atherElem){var itemHeight=thisElem.outerHeight(false),itemAbsHeight=atherElem.outerHeight(false);return(itemHeight<itemAbsHeight)?itemAbsHeight:itemHeight},refreshHeight=function(deltaHeight){if(mq()===2||mq()===1){if(+deltaHeight){var index=$curenttab.index();$curenttab.children("."+ClassContent).height(itemsHeight[index]=itemsHeight[index]+deltaHeight);$minitabs.parent().height($minitabsHeight[index]=$minitabsHeight[index]+deltaHeight)}else{items.each(function(index){itemsHeight[index]=getItemHeight($minitabs,$(this).find("."+ClassAbs));if($minitabsHeight[index]){$minitabsHeight[index]=(itemsHeight[index]>$minitabsHeight[index])?itemsHeight[index]:$minitabsHeight[index]}else{$minitabsHeight[index]=itemsHeight[index]}})}}else{items.each(function(index){itemsHeight[index]=getItemHeight($(this),$(this).find("."+ClassAbs))})}},resizable=function(){var isDesctop=(mq()===2||mq()===1);if(isDesctop&&!DesctopOn){reDraw();DesctopOn=true;MobileOn=false}if(!isDesctop&&!MobileOn){reDraw();MobileOn=true;DesctopOn=false}},reDraw=function(){refreshHeight();hideContent(items);if(mq()===2||mq()===1){showContent($curenttab||items.filter("."+ClassItemDefault));chapterDescScroll($curenttab)}else{if($curenttab){showContent($curenttab);chapterDescScroll($curenttab,true)}}},chapterDescScroll=function(item,reset){reset=reset||false;var wrap=$("."+ClassTabs).eq(0);if(!wrap.hasClass("st-open")){return false}items.each(function(index){resetPos($(this).find("."+ClassAbs).eq(0))});var wrap_pos_top=Math.ceil(wrap.position().top);var popup_wrapper=$($.magnificPopup.instance.wrap[0]);var scroll_pos=popup_wrapper.scrollTop();var item_desc=item.find("."+ClassAbs).eq(0);if(reset){resetPos(item_desc);popup_wrapper.off("scroll.chapterDescScroll")}function setPos(){if(scroll_pos>wrap_pos_top){item_desc.css({position:"absolute",top:(scroll_pos-wrap_pos_top)+"px"})}else{item_desc.removeAttr("style")}}function resetPos(el){el.removeAttr("style")}setPos();popup_wrapper.on("scroll.chapterDescScroll",function(){scroll_pos=$(this).scrollTop();setPos()})};return{init:function($tabs){$minitabs=$tabs||$minitabs;items=$minitabs.find("."+ClassItem);reDraw();items.children("."+ClassHead).on("click.minitabs",function(){toggleItem($(this).parent())});$(window).on("resize.minitabs",function(){resizable()})},remove:function(){items.children("."+ClassHead).off("click.minitabs");$(window).off("resize.minitabs");$minitabsHeight=itemsHeight=[]},refreshHeight:refreshHeight,open:showContent}}());$(".videoprokat-popup__tabs-head").click(function(){var tabWrap=$(this).parents(".videoprokat-popup__tabs"),tabContent=$(this).next(".videoprokat-popup__tabs-content"),tabContentHeight;if(!tabWrap.hasClass("st-open")){ifComplite(function(){videoprokat_minitabs.init($(".videoprokat-popup__minitabs"))}).done(function(){tabWrap.addClass("st-open");tabContentHeight=tabContent.children(".videoprokat-popup__minitabs-wrap").outerHeight(false);tabContent.height(tabContentHeight);tabWrap.find(".videoprokat-popup__minitab-item_open").removeClass("videoprokat-popup__minitab-item_open");tabContent.one(transition_end,function(e){videoprokat_minitabs.open($(".videoprokat-popup__minitab-item_default"))});setTimeout(function(){tabContent.css("min-height",tabContentHeight+"px");tabContent.height("auto")},800)})}else{videoprokat_minitabs.remove();tabWrap.removeClass("st-open");tabContent.height(tabContent.children(".videoprokat-popup__minitabs-wrap").outerHeight(false)).height(0);tabContent.removeAttr("style")}});textSplitter.init($("[data-textsplitter]"),{clickCallback:function(deltaHeight){videoprokat_minitabs.refreshHeight(deltaHeight)}});actions.scalingImages=(function(){var ScaleImage=function(opt){var $img=opt.$scaleImg,scaleAxis=opt.scaleAxis,scaleNumSteps=+opt.scaleNumSteps,currentStep,imageRealSize=[$img[0].naturalWidth,$img[0].naturalHeight],imageRatio=imageRealSize[0]/imageRealSize[1],wrapSize=opt.wrapSize,wrapRatio=wrapSize[0]/wrapSize[1],stepL=[],maxMove=[],wrapCenterPosition=[],scaleSteps=[],CurPosImg=[],CurSizeImg=[],CurImgShift=[0.5,0.5],CursorPos=[];if(scaleAxis===2){scaleAxis=(wrapRatio<imageRatio)?0:1}for(var i=scaleNumSteps+1;i-->0;){scaleSteps[i]=[]}scaleSteps[0][0]=wrapSize[0]/imageRealSize[0];scaleSteps[0][1]=wrapSize[1]/imageRealSize[1];scaleSteps[scaleNumSteps][0]=1;scaleSteps[scaleNumSteps][1]=1;stepL[0]=(scaleSteps[0][0]-1)/scaleNumSteps;stepL[1]=(scaleSteps[0][1]-1)/scaleNumSteps;for(i=scaleNumSteps;i-->1;){scaleSteps[i][0]=scaleSteps[0][0]-stepL[0]*i;scaleSteps[i][1]=scaleSteps[0][1]-stepL[1]*i}wrapCenterPosition[0]=wrapSize[0]/2;wrapCenterPosition[1]=wrapSize[1]/2;function borderXChecking(){if(CurPosImg[0]>0&&CurPosImg[0]<maxMove[0]){CurImgShift[0]=0.5;CurPosImg[0]=wrapCenterPosition[0]-CurSizeImg[0]*CurImgShift[0];return}if(CurPosImg[0]>0&&CurPosImg[0]>maxMove[0]){CurPosImg[0]=0}if(CurPosImg[0]<maxMove[0]&&CurPosImg[0]<0){CurPosImg[0]=maxMove[0]}}function borderYChecking(){if(CurPosImg[1]>0&&CurPosImg[1]<maxMove[1]){CurImgShift[1]=0.5;CurPosImg[1]=wrapCenterPosition[1]-CurSizeImg[1]*CurImgShift[1];return}if(CurPosImg[1]>0&&CurPosImg[1]>maxMove[1]){CurPosImg[1]=0}if(CurPosImg[1]<maxMove[1]&&CurPosImg[1]<0){CurPosImg[1]=maxMove[1]}}function zoomTo(val,callback){if(val==="undefined"){return false}if(val==="+"){if(currentStep<scaleNumSteps){return zoomTo(++currentStep,callback)}else{return false}}if(val==="-"){if(currentStep>0){return zoomTo(--currentStep,callback)}else{return false}}currentStep=val;if(scaleAxis===0){CurSizeImg[0]=scaleSteps[val][0]*imageRealSize[0];CurSizeImg[1]=scaleSteps[val][0]*imageRealSize[1]}else{CurSizeImg[0]=scaleSteps[val][1]*imageRealSize[0];CurSizeImg[1]=scaleSteps[val][1]*imageRealSize[1]}CurPosImg[0]=wrapCenterPosition[0]-CurSizeImg[0]*CurImgShift[0];CurPosImg[1]=wrapCenterPosition[1]-CurSizeImg[1]*CurImgShift[1];maxMove[0]=wrapSize[0]-CurSizeImg[0];maxMove[1]=wrapSize[1]-CurSizeImg[1];borderXChecking();borderYChecking();$img.width(CurSizeImg[0]).height(CurSizeImg[1]).css({left:CurPosImg[0]+"px",top:CurPosImg[1]+"px"});callback()}function move(e){if(!e){CursorPos=[];return}if(!CursorPos.length){CursorPos=e.data.inital}var distX=getCoords(e).x-CursorPos[0],distY=getCoords(e).y-CursorPos[1];CurPosImg[0]+=distX;borderXChecking();CurImgShift[0]=(wrapCenterPosition[0]-CurPosImg[0])/CurSizeImg[0];CurPosImg[1]+=distY;borderYChecking();CurImgShift[1]=(wrapCenterPosition[1]-CurPosImg[1])/CurSizeImg[1];$img.css({left:CurPosImg[0]+"px",top:CurPosImg[1]+"px"});CursorPos[0]=getCoords(e).x;CursorPos[1]=getCoords(e).y}return{zoomTo:zoomTo,move:move,getCurrentStep:function(){return currentStep},getNumSteps:function(){return scaleNumSteps}}};function initElem($cm){$cm.removeClass("cover-map-wrap_active-true").css({width:"",height:""});var prop=($cm.attr("data-cm"))?$cm.data("cm").toString().split(","):[],$cmImg=$cm.find("[data-cm-img], #zoom-map").css({width:"",height:"",top:"",left:""}),$cmControls=$cm.find("[data-cm-controls], .cover-map-controls"),$cmControlsPlus=$cmControls.find("[data-cm-control=plus], #zoom-plus"),$cmControlsMinus=$cmControls.find("[data-cm-control=minus], #zoom-minus"),wrapSize=[$cm.width(),$cm.height()];$cm.width(wrapSize[0]).height(wrapSize[1]);var newCM=ScaleImage({$scaleImg:$cmImg,wrapSize:wrapSize,scaleNumSteps:prop[0]||1,scaleAxis:prop[1]||2});var ClassChange=function(){if(newCM.getCurrentStep()===0){$cmControlsMinus.addClass("map-zoom-btn_disabled")}else{$cmControlsMinus.removeClass("map-zoom-btn_disabled")}if(newCM.getCurrentStep()===newCM.getNumSteps()){$cmControlsPlus.addClass("map-zoom-btn_disabled")}else{$cmControlsPlus.removeClass("map-zoom-btn_disabled")}};$cmControlsPlus.on("click",function(){newCM.zoomTo("+",ClassChange)});$cmControlsMinus.on("click",function(){newCM.zoomTo("-",ClassChange)});newCM.zoomTo(0,ClassChange);$cm.on({"mousedown touchstart":function(e){if(e.target!==$cmControlsPlus[0]&&e.target!==$cmControlsMinus[0]&&e.target!==$(".modal-form-close")[0]){e.preventDefault();var pX=getCoords(e).x,pY=getCoords(e).y;$(this).on("mousemove.cm touchmove.cm",{inital:[pX,pY]},newCM.move);$(document).on("mouseup touchend",function(){$cm.off("mousemove.cm touchmove.cm");newCM.move(false)})}}}).addClass("cover-map-wrap_active-true")}function getCoords(e){var pX,pY;switch(e.type){case"touchstart":case"touchmove":pX=e.originalEvent.touches[0].pageX;pY=e.originalEvent.touches[0].pageY;break;default:pX=e.pageX;pY=e.pageY;break}return{x:pX,y:pY}}return{init:function($elem){if($elem){$elem.each(function(){initElem($(this))})}else{$("#cover-map").add("[data-cm]").each(function(){initElem($(this))})}}}})();$(document).on("ready",function(){actions.scalingImages.init()});$(window).on("orientationchange",function(){actions.scalingImages.init()});