var utils={};utils.type=function(A){return A!=null?Object.prototype.toString.call(A).slice(8,-1).toLowerCase():(typeof(A)=="undefined"?"undefined":"null")};utils.isset=function(A){return typeof(A)!="undefined"};utils.isBoolean=function(A){return utils.type(A)=="boolean"};utils.isObject=function(A){return utils.type(A)=="object"};utils.isArray=function(A){return utils.type(A)=="array"};utils.isNumber=function(A){return utils.type(A)=="number"};utils.isString=function(A){return utils.type(A)=="string"};utils.isFunction=function(A){return utils.type(A)=="function"};utils.isEmpty=function(A){switch(utils.type(A)){case"undefined":case"null":return true;case"string":case"array":return !A.length;case"number":return isNaN(A);case"object":for(var k in A){return false}return true}return false};utils.containsAll=function(arr1,arr2){for(var i in arr2){if($.inArray(arr2[i],arr1)==-1){return false}}return true};utils.indexOf=function(value,where,strict){var size=where.length;if(strict){for(var i=0;i<size;i++){if(where[i]===value){return i}}}else{for(var i=0;i<size;i++){if(where[i]==value){return i}}}return -1};utils.inArray=function(value,where,strict){if(!utils.isArray(where)){throw new Error("Parameter is not an array")}return utils.indexOf(value,where,strict)!=-1};utils.removeAll=function(values,where,strict){if(!utils.isArray(values)||!utils.isArray(where)){throw new Error("Parameters is not an array")}var filtered=[].concat(where);for(var i in values){var index=utils.indexOf(values[i],filtered,strict);if(index>-1){filtered.splice(index,1)}}return filtered};utils.startsWith=function(string,prefix){return string.slice(0,prefix.length)==prefix};utils.Base64=(function(){var self={};var safe={};safe.encode=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","-","_"];safe.decode=inverse(safe.encode);safe.padding="=";var base={};base.encode=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"];base.decode=inverse(base.encode);base.padding="=";function inverse(source){var length=source.length,result={};for(var i=0;i<length;i++){result[source[i]]=i}return result}function encode(source,mapp,padd){var length=source.length;var buffer=[];for(var i=0,c;i<length;i++){c=source.charCodeAt(i);if(c<=127){buffer.push(c)}else{if(c<=2047){buffer.push(192|((c>>>6)&31));buffer.push(128|((c)&63))}else{buffer.push(224|((c>>>12)&15));buffer.push(128|((c>>>6)&63));buffer.push(128|((c)&63))}}}var padded=buffer.length;var result="";for(var i=0,a,b,c;i<padded;i+=3){if(i+2<padded){a=buffer[i];b=buffer[i+1];c=buffer[i+2];result+=mapp[((a>>>2)&63)];result+=mapp[((a<<4)&48)|((b>>>4)&15)];result+=mapp[((b<<2)&60)|((c>>>6)&3)];result+=mapp[((c)&63)]}else{if(i+1<padded){a=buffer[i];b=buffer[i+1];result+=mapp[((a>>>2)&63)];result+=mapp[((a<<4)&48)|((b>>>4)&15)];result+=mapp[((b<<2)&60)];result+=padd}else{a=buffer[i];result+=mapp[((a>>>2)&63)];result+=mapp[((a<<4)&48)];result+=padd;result+=padd}}}return result}function decode(source,mapp,padd){var length=source.length;while(length>0&&source.charAt(length-1)===padd){length--}var buffer=[];for(var i=0,j,c,n;i<length;i++){if((n=mapp[c=source.charAt(i)])==null){throw new Error("Illegal character "+c+" at "+i)}j=3*(i>>>2);switch(i&3){case 3:buffer[j+2]|=(n)&63;break;case 2:buffer[j+1]|=(n>>>2)&15;buffer[j+2]=(n<<6)&192;break;case 1:buffer[j]|=(n>>>4)&3;buffer[j+1]=(n<<4)&240;break;default:buffer[j]=(n<<2)&252;break}}var padded=buffer.length;if(length&3){padded--}var result="";for(var i=0,c;i<padded;){c=buffer[i];if(c>=128){if(c<192||c>=240){throw new Error("Illegal code point "+c+" at "+i)}if(c<=223){if(i+1>=padded){throw new Error("Unexpected end of stream at "+i)}c=((c&31)<<6)|(buffer[i+1]&63);i+=2}else{if(i+2>=padded){throw new Error("Unexpected end of stream at "+i)}c=((c&15)<<12)|((buffer[i+1]&63)<<6)|(buffer[i+2]&63);i+=3}}else{i+=1}result+=String.fromCharCode(c)}return result}self.encode=function(source){return encode(source,safe.encode,safe.padding)};self.decode=function(source){return decode(source,safe.decode,safe.padding)};self.Base={};self.Base.encode=function(source){return encode(source,base.encode,base.padding)};self.Base.decode=function(source){return decode(source,base.decode,base.padding)};return self})();utils.deparam=function(params,coerce){if(utils.isEmpty(params)){return null}var obj={},coerce_types={"true":!0,"false":!1,"null":null};$.each(params.split("&"),function(j,v){var param=v.split("="),key=utils.decodeURI(param[0]),val,cur=obj,i=0,keys=key.split("]["),keys_last=keys.length-1;if(/\[/.test(keys[0])&&/\]$/.test(keys[keys_last])){keys[keys_last]=keys[keys_last].replace(/\]$/,"");keys=keys.shift().split("[").concat(keys);keys_last=keys.length-1}else{keys_last=0}if(param.length===2){val=utils.decodeURI(param[1]);if(coerce){val=val&&!isNaN(val)?+val:val==="undefined"?undefined:coerce_types[val]!==undefined?coerce_types[val]:val}if(keys_last){for(;i<=keys_last;i++){key=keys[i]===""?cur.length:keys[i];cur=cur[key]=i<keys_last?cur[key]||(keys[i+1]&&isNaN(keys[i+1])?{}:[]):val}}else{if($.isArray(obj[key])){obj[key].push(val)}else{if(obj[key]!==undefined){obj[key]=[obj[key],val]}else{obj[key]=val}}}}else{if(key){obj[key]=coerce?undefined:""}}});return obj};$.extend({getUrlVars:function(){if(window.location.href.indexOf("?")==-1){return[]}var vars=[],hash;var hashes=window.location.href.slice(window.location.href.indexOf("?")+1).split("&");for(var i=0;i<hashes.length;i++){hash=hashes[i].split("=");vars.push(hash[0]);vars[hash[0]]=hash[1]}return vars},getUrlVar:function(name){if($.getUrlVars()[name]==undefined){return null}else{return $.getUrlVars()[name]}}});$.fn.push=function(selector){Array.prototype.push.apply(this,$.makeArray($(selector)));return this};utils.toInt=function(A,B){return parseInt(A,B||10)||0};utils.toFloat=function(A){return parseFloat(A)||0};utils.toBoolean=function(A){switch(utils.type(A)){case"boolean":return A;case"number":return A>0;case"string":return A.toLowerCase()=="true"||utils.toInt(A)>0}return false};utils.trim=function(A){return String(A).replace(/^\s+|\s+$/g,"")};utils.rand=function(Min,Max){return Max?Math.floor(Math.random()*(Max-Min))+Min:Math.floor(Math.random()*Min)};utils.microtime=function(){return(new Date()).getTime()};utils.unique=function(){return"utils"+Math.floor(1000000000000*Math.random())};utils.repeat=function(A,N){var R="";while(--N>=0){R+=A}return R};utils.escape=function(A){if(A==null){return""}return String(A).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};utils.nl2br=function(A){return String(A).replace(/\r?\n/g,"<br>")};utils.clear=function(A){return String(A).replace(/[^\w\-]+/g,"-").replace(/^[-]+|[-]+$/g,"")};utils.join=function(A,S){if(utils.isArray(A)){return A.join(S)}if(utils.isObject(A)){var R="",i=0;for(var j in A){if(i>0){R+=S}R+=String(A[j]);i++}return R}return String(A)};utils.noop=function(){};utils.notImplemented=function(){throw new Exception("function must be to overridden")};utils.text=function(A,D){if(A!=null){return String(A)}if(D!=null){return String(D)}return""};utils.replaceAll=function(A,F,T){return A.split(F).join(T)};utils.print=function(A){switch(utils.type(A)){case"string":return A;case"null":case"undefined":case"number":case"boolean":case"regexp":case"date":return String(A);case"function":return"function(){}";case"array":var temp=[],n=A.length,i;for(i=0;i<n;i++){temp.push(utils.print(A[i]))}return"["+temp.join(", ")+"]";case"object":var temp=[],i;for(i in A){temp.push(i+": "+utils.print(A[i]))}return"{"+temp.join(", ")+"}"}};utils.buttonLoader=function(el){var elem=$("#"+el),$form=elem.parents(".validate_form"),correct=validatorFilter.validateForm($form);if(correct){elem.data("unloader-txt",elem.text()).text(elem.attr("data-loader-txt")||"Отправляем").addClass("button-loader").attr("disabled",true);$('<div class="spinner-circle-blue"></div>').prependTo(elem)}return correct};utils.buttonUnLoader=function(el,text){var elem=$("#"+el);text=text||elem.data("unloader-txt");if(utils.isEmpty(text)){text="Отправить"}elem.text(text).removeClass("button-loader button-disabled").prop("disabled",false).remove(".spinner-circle-blue")};utils.parseFee=function(fee){fee=parseInt(fee);var accKop=Math.abs(fee%100);var accRub=parseInt(fee/100);var accStr=accRub+".";if(accKop<10){accStr=accStr+"0"}return accStr+accKop};utils.parseFeeRub=function(fee){fee=parseInt(fee);return parseInt(fee/100)};utils.getTariffSpeedIco=function(speed){speed=parseInt(speed)/1024;var icoDeg=0;if(speed<=5){icoDeg=0}else{if(speed<=10){icoDeg=10}else{if(speed<=15){icoDeg=40}else{if(speed<=25){icoDeg=45}else{if(speed<=35){icoDeg=50}else{if(speed<=45){icoDeg=80}else{if(speed<=50){icoDeg=50}else{if(speed<=60){icoDeg=100}else{if(speed<=70){icoDeg=130}else{if(speed<=75){icoDeg=135}else{if(speed<=80){icoDeg=140}else{if(speed<=90){icoDeg=175}else{icoDeg=175}}}}}}}}}}}}return"choise-ico_speedometr-"+icoDeg+"deg"};utils.plural=function(a,p){var n=utils.toInt(a),i=(n%10==1&&n%100!=11)?0:((n%10>=2&&n%10<=4&&(n%100<10||n%100>=20))?1:2);return utils.isset(p[i])?p[i]:""};utils.getLinkWithCity=function(href,adrMgr){href=href||"/";adrMgr=adrMgr||window.adrMgr;var index=href.search("(^|[^:/])/[^/]");var trimed=index>0?href.substr(0,index+1):"";href=href.substr(index+(index>0?2:1));var possibleCity=href.substr(0,href.search("/"));var city=adrMgr.other?"other":(adrMgr.selectedCity.synonym!=adrMgr.selectedRegion.synonym?adrMgr.selectedCity.synonym:null);if(city&&possibleCity!=city){href=city+"/"+href}href=trimed+"/"+href;return href};var logger={methodMap:{0:"debug",1:"info",2:"warn",3:"log",4:"error"},DEBUG:0,INFO:1,WARN:2,LOG:3,ERROR:4,level:4,log:function(level,obj){if(logger.level>=level){var method=logger.methodMap[level];if(typeof console!=="undefined"&&console[method]){console[method](obj);if(window.onerror){window.onerror("From JS logger"+(method?"("+method+"): ":"")+obj)}}}}};utils.log=function(msg){logger.log(logger.LOG,msg)};utils.info=function(msg){logger.log(logger.INFO,msg)};utils.debug=function(msg){logger.log(logger.DEBUG,msg)};utils.error=function(msg){logger.log(logger.ERROR,msg)};utils.warn=function(msg){logger.log(logger.WARN,msg)};utils.decodeURI=function(data){return decodeURIComponent((data+"").replace(/\+/g," "))};utils.decodeURIObject=function(obj){for(var key in obj){var param=obj[key];if(utils.isObject(param)||utils.isArray(param)){utils.decodeURIObject(param)}else{obj[key]=utils.decodeURI(param)}}return obj};utils.setCookie=function(name,value,props){props=props||{};var exp=props.expires;if(typeof exp=="number"&&exp){var d=new Date();d.setTime(d.getTime()+exp*1000);exp=props.expires=d}if(exp&&exp.toUTCString){props.expires=exp.toUTCString()}value=encodeURIComponent(value);var updatedCookie=name+"="+value;for(var propName in props){if(propName=="domain"&&(/:[0-9]{4}$/.test(props[propName]))){continue}updatedCookie+="; "+propName;var propValue=props[propName];if(propValue!==true){updatedCookie+="="+propValue}}document.cookie=updatedCookie;return updatedCookie};utils.setIECookie=function(regSynonym,callback){if(ie_ver()){var baseUrl="//"+window.docContext.properties.shortUrl+"/pages/sc.jsp?";var url=baseUrl+"rtsession="+$.cookie("rtsession");$.ajax({url:url,type:"POST",dataType:"jsonp",async:true,cache:false});if(regSynonym){url="//"+regSynonym+"."+window.docContext.properties.shortUrl+"/pages/sc.jsp?";url+="rtsession="+$.cookie("rtsession");$.ajax({url:url,type:"POST",dataType:"jsonp",async:true,cache:false,complete:function(){if(callback){callback()}}})}else{if(callback){callback()}}}};utils.fireEvent=function(element,name){var event;if(document.createEvent){event=document.createEvent("HTMLEvents");event.initEvent(name,true,true)}else{event=document.createEventObject();event.eventType=name}event.eventName=name;if(document.createEvent){element.dispatchEvent(event)}else{element.fireEvent("on"+event.eventType,event)}};utils.getIEVersion=function(){var rv=-1;if(navigator.appName=="Microsoft Internet Explorer"){var ua=navigator.userAgent;var re=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");if(re.exec(ua)!=null){rv=parseFloat(RegExp.$1)}}else{if(navigator.appName=="Netscape"){var ua=navigator.userAgent;var re=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})");if(re.exec(ua)!=null){rv=parseFloat(RegExp.$1)}}}return rv};utils.getNowHourMSK=(function(){var offsetMSK=((new Date()).getTimezoneOffset()+180)*60*1000;return function(){var date=new Date();var time=date.getTime();date.setTime(time+offsetMSK);return date.getHours()}})();utils.getNowHourURAL=(function(){var offsetURAL=((new Date()).getTimezoneOffset()+300)*60*1000;return function(){var date=new Date();var time=date.getTime();date.setTime(time+offsetURAL);return date.getHours()}})();utils.getNowHour=(function(){return function(){return new Date().getHours()}})();utils.sendPost=(function(){function append(form,name,value){var item=document.createElement("INPUT");item.type="hidden";item.name=name;item.value=value!=null?value:"";form.appendChild(item)}return function(url,data,attrs){if(data!=null&&!utils.isObject(data)){throw new Error("Parameters list must be an object")}var body=document.getElementsByTagName("BODY");if(!body||!body.length){throw new Error("Body element is not defined")}var form=document.createElement("FORM");form.method="post";form.action=url;for(var name in data){var value=data[name];if(utils.isArray(value)){var size=value.length,i;for(i=0;i<size;i++){append(form,name,value[i])}}else{append(form,name,value)}}body[0].appendChild(form);if(attrs){if(!utils.isObject(attrs)){throw new Error("Attributes list must be an object")}for(var name in attrs){var value=attrs[name];form.setAttribute(name,value)}}form.submit();return true}})();(function(window,utils,$){if(utils==null||$==null){throw new Error("Dependencies are not defined")}(function($){function disable(){this.style.MozUserSelect="none";this.style.webkitUserSelect="none";this.onselectstart=function(){return false};this.unselectable="on"}$.fn.unselectable=function(flag){if(flag){this.find("*").each(disable)}this.each(disable);return this}})($);(function(utils,$){var self={},$html=null,$body=null,dhtml=null,overflow=null,scrollWd=null,margin=null,hidden=false,loaded=false;$(function($){$html=$("html").eq(0);$body=$("body").eq(0);dhtml=$html[0];overflow=$html.css("overflow");$html.css("overflow","hidden");scrollWd=dhtml.clientWidth;$html.css("overflow","scroll");scrollWd-=dhtml.clientWidth;if(overflow!=="scroll"){$html.css("overflow",overflow)}loaded=true});self.width=function(){return scrollWd};self.isHidden=function(){return hidden};self.show=function(){if(!loaded||!hidden){return false}if(margin!=null){$body.css("marginRight",margin)}$html.css("overflow",overflow);hidden=false;return true};self.hide=function(){if(!loaded||hidden){return false}if(dhtml.clientHeight<dhtml.scrollHeight){margin=utils.toFloat($body.css("marginRight"));$body.css("marginRight",margin+scrollWd)}else{margin=null}$html.css("overflow","hidden");hidden=true;return true};utils.DocumentScrollbar=self})(utils,$);(function(utils,$){var self={},prop={},popup={},queue=[],dhtml=null,screen={},opened=false,loaded=false,doopen=false;var $wrapper=$("<div />").css({position:"fixed",margin:"0px",padding:"0px",border:"0px none",left:"0px",top:"0px",width:"0px",height:"0px",overflow:"hidden",background:"transparent"});var $overlay=$("<div />").css({position:"absolute",margin:"0px",padding:"0px",border:"0px none",left:"0px",top:"0px",zIndex:"10",overflow:"hidden"}).appendTo($wrapper);var $viewport=$("<div />").css({position:"absolute",margin:"0px",padding:"0px",border:"0px none",left:"0px",top:"0px",zIndex:"100",overflow:"auto",background:"transparent"}).appendTo($wrapper);var $container=$("<div />").css({margin:"0px",padding:"0px",border:"0px none",overflow:"visible",background:"transparent"}).appendTo($viewport);$(function($){dhtml=$("html")[0];$wrapper.appendTo("body").hide();$(window).bind("resize ondeviceorientation",function(e){self.update()});screen={width:Math.max(0,window.screen.width-utils.DocumentScrollbar.width()),height:Math.max(0,window.screen.height-utils.DocumentScrollbar.width())};loaded=true;if(doopen){show()}});function hide(){if(!loaded){doopen=false;return}if(!opened){return}$wrapper.hide();utils.DocumentScrollbar.show();opened=false}function show(){if(!loaded){doopen=true;return}if(opened){self.update();return}utils.DocumentScrollbar.hide();$wrapper.show();opened=true;self.update()}function remove(source,id){var result=[],n=source.length;for(var i=0;i<n;i++){var c=source[i];if(c!==id){result.push(c)}}return result}function showtop(){var top=popup[queue[0]];$overlay.attr("class",top.overlayClass||prop.overlayClass);$container.css(screen);top.show.call(top.context);show()}self.prop=function(name,value){if(utils.isObject(name)){for(var i in name){self.prop(i,name[i])}return self}if(!utils.isset(value)){return prop[name]}switch(name){case"zIndex":prop[name]=value;$wrapper.css("zIndex",value);break;case"opacity":prop[name]=value;$overlay.css("opacity",value);break;case"overlayClass":prop[name]=value;break}return self};self.append=function(id,item){if(popup[id]){return false}if(!utils.isObject(item)){throw new Error("Item is not an object")}item.content.css({position:"absolute",display:"none",left:"-9999px",top:"-9999px"}).appendTo($container);popup[id]=item;return true};self.remove=function(id){if(self.close(id)){delete popup[id]}return true};self.openOnTop=function(id){if(!popup[id]){return false}if(queue.length>0){var tid=queue[0],top=popup[tid];if(tid===id){return true}queue=remove(queue,id);top.hide.call(top.context)}queue.unshift(id);showtop();return true};self.openBehind=function(id){if(!popup[id]){return false}var index=queue.length;while(--index>=0){if(queue[index]===id){return true}}queue.push(id);if(queue.length==1){showtop()}return true};self.close=function(id){if(!popup[id]){return false}if(!queue.length){return true}var tid=queue[0],top=popup[tid];if(tid===id){top.hide.call(top.context)}queue=remove(queue,id);if(queue.length>0){if(tid===id){showtop()}}else{hide()}return true};self.update=function(){if(!opened){return}var view={width:dhtml.clientWidth,height:dhtml.clientHeight};$wrapper.css(view);$overlay.css(view);$viewport.css(view);if(!queue.length){$container.css(view);return}var top=popup[queue[0]],$target=top.content;var item={width:$target.outerWidth(false),height:$target.outerHeight(false)};var cont={width:Math.max(item.width,view.width),height:Math.max(item.height,view.height)};var offs={left:Math.max(0,(cont.width-item.width)>>>1),top:Math.max(0,(cont.height-item.height)>>>1)};if(item.width<view.width){cont.width=item.width+offs.left}if(item.height<view.height){cont.height=item.height+offs.top}$container.css(cont);$target.css(offs);top.update.call(top.context)};self.prop({overlayClass:"",zIndex:100000,opacity:0.7});utils.PopupContainer=self})(utils,$);(function(utils,$){var instances={};var ATTR_POPUPID="data-popup-id";$(function($){$(document).keyup(function(e){if(e.keyCode!=27){return}for(var id in instances){var inst=instances[id];if(inst.__active){if(inst.__prop.closeByEsc){inst.close()}return}}})});function Popup(init,content){if(!utils.isObject(init)){throw new Error("Init is not an object")}this.__content=$(content||init.content).eq(0);if(!this.__content.size()){throw new Error("Content is not defined")}this.__id=utils.unique();this.__prop={};this.__item={context:this,content:this.__content,show:this.__show,hide:this.__hide,update:this.__update};this.__opened=false;this.__active=false;this.prop($.extend({contentClass:"Utils-popup",overlayClass:"mfp-bg mfp-bg_topshadow-true",closeBy:".popup-close-btn",removeOnClose:false,closeByEsc:true,openOnTop:false},init));utils.PopupContainer.append(this.__id,this.__item);if(utils.isFunction(init.onCreate)){this.__content.css("display","block");init.onCreate.call(this);this.__content.css("display","none")}this.__content.attr(ATTR_POPUPID,this.__id);instances[this.__id]=this}Popup.prototype.__show=function(){this.__content.show();this.__active=true};Popup.prototype.__hide=function(){this.__content.hide();this.__active=false};Popup.prototype.__update=function(){if(this.__prop.onUpdate){this.__prop.onUpdate.call(this)}};Popup.prototype.isOpened=function(){return this.__opened};Popup.prototype.isActive=function(){return this.__active};Popup.prototype.content=function(selector){return utils.isset(selector)?this.__content.find(selector):this.__content};Popup.prototype.open=function(){if(this.__opened){return false}if(this.__prop.onOpen){this.__prop.onOpen.apply(this,arguments)}if(this.__prop.openOnTop){utils.PopupContainer.openOnTop(this.__id)}else{utils.PopupContainer.openBehind(this.__id)}this.__opened=true;return true};Popup.prototype.openOnTop=function(){if(!this.__opened&&this.__prop.onOpen){this.__prop.onOpen.apply(this,arguments)}utils.PopupContainer.openOnTop(this.__id);this.__opened=true;return true};Popup.prototype.close=function(){if(!this.__opened){return false}utils.PopupContainer.close(this.__id);if(this.__prop.onClose){this.__prop.onClose.apply(this,arguments)}if(this.__prop.removeOnClose){this.remove()}this.__opened=false;this.__active=false;return true};Popup.prototype.update=function(){if(!this.__active){return false}utils.PopupContainer.update();return true};Popup.prototype.remove=function(){delete instances[this.__id];utils.PopupContainer.remove(this.__id);if(this.__prop.onRemove){this.__prop.onRemove.call(this)}this.__content.remove();return true};Popup.prototype.prop=function(name,value){if(utils.isObject(name)){for(var i in name){this.prop(i,name[i])}return this}if(!utils.isset(value)){return this.__prop[name]}switch(name){case"onOpen":case"onClose":case"onUpdate":case"onRemove":if(!utils.isFunction(value)){throw new Error(name+" is not a function")}this.__prop[name]=value;break;case"removeOnClose":case"closeByEsc":case"openOnTop":this.__prop[name]=!!value;break;case"overlayClass":this.__prop[name]=value;this.__item[name]=value;break;case"contentClass":this.__prop[name]=value;this.content().attr("class",value);break;case"closeBy":this.__prop[name]=value;var that=this;this.content(value).click(function(e){that.close()});break}return this};$.fn.utilsPopup=function(init){var $this=this.eq(0);if(!$this.size()){throw new Error("Target element is not defined")}if(!utils.isset(init)){var id=$this.attr(ATTR_POPUPID);if(instances[id]){return instances[id]}throw new Error("Instance does not exist")}return new Popup(init,$this)};utils.Popup=Popup})(utils,$);(function(utils,$){var prop={};function self(text,type,title,callback){if(callback!=null&&!utils.isFunction(callback)){throw new Error("Callback is not a function")}var clazz=type||"notice";var inst=new utils.Popup({contentClass:"modal-form "+clazz,overlayClass:"mfp-bg mfp-bg_topshadow-true "+clazz,removeOnClose:true,closeByEsc:prop.closeByEsc,openOnTop:false,content:'<div class="modal-form "><div class="modal-form__form"><div class="modal-form-close popup-close-btn"/><h1 class="modal-form__title">'+(utils.isEmpty(title)?prop.title:title)+'</h1><p class="content-p-4">'+text+'</p><button class="button-3 button-3_size-small popup-close-btn">ОК</button></div></div>',onClose:function(){if(callback){callback.call(this)}}});inst.open();return inst}self.prop=function(name,value){if(utils.isObject(name)){for(var i in name){self.prop(i,name[i])}return self}if(!utils.isset(value)){return prop[name]}switch(name){case"title":case"close":case"closeByEsc":prop[name]=value;break}return self};self.prop({title:"Внимание!",close:"Закрыть",closeByEsc:true});utils.Message=self;utils.Notice=function(text,title,onClose){return self(text,"notice",title,onClose)};utils.Error=function(text,title,onClose){return self(text,"error",title,onClose)}})(utils,$);utils.restoreData=function($items){if($items instanceof jQuery){$items.each(function(){var $item=$(this);$.each(this.attributes,function(){if(this.specified&&utils.isString(this.name)&&utils.startsWith(this.name,"data-")){$item.data(this.name,this.value)}})})}};var selectricPrefix="js-selectric";function getSelectricNumber($select){var classes=$select.attr("class")||"";var number=classes.substr(classes.indexOf(selectricPrefix)+selectricPrefix.length);return utils.toInt(number.substr(0,number.search("[^\\d]")))}function selectricWithDefault($select){var classes=$select.attr("class")||"";classes=classes.substr(classes.indexOf(selectricPrefix));return classes.substr(0,classes.search("\\s|$")).indexOf("default")!=-1}function _resetSelectric($select){$select.selectric("refresh");$select.val(-1);$select.selectric("refresh")}utils.resetSelectric=function($select){if($select instanceof jQuery){_resetSelectric($select);$select.validatorFilter("reinit");$select.selectric("destroy");_resetSelectric($select);var number=getSelectricNumber($select);if(number==3){var items=$select.parents("."+selectricPrefix+number).find("li"),opts=$select.find("option"),str;opts.each(function(index){str=$(this).attr("data-opt");if(str!==undefined&&str!==""){$(items[index]).html("").html(str)}});$select.addClass("opt-replased")}if(selectricWithDefault($select)){$select.closest('[class^="selectric'+number+'-wrapper"]').addClass("selectric"+number+"-default")}}};function orderInternetFix(){if($("#profile-active_tariff").size()>0&&!utils.isEmpty($("#profile-active_tariff").val())&&/order_internet$/gi.test(window.location.pathname)){$(".js-option-list[data-tariff-id]").not("[data-tariff-id="+$("#profile-active_tariff").val()+"]").find(".profile_garbage_class").removeClass("profile_garbage_class")}}utils.sendPostWithUserCollector=function(url,obj){orderInternetFix();if(utils.isFunction(window.onBeforeUserCollect)){$.extend(obj,window.onBeforeUserCollect())}utils.sendPost(url+window.location.search,$.extend(obj,collect()),{target:"_self"})};function collect(){var options={};$(".profile_garbage_class").each(function(){var $this=$(this);if(!this.tagName||(!this.name&&!$this.attr("name"))){return}if(this.type=="radio"&&!this.checked){return}var name=(this.name||$this.attr("name")).replace(/(?:\[\])+$/gi,"");var multi=!!name.match(/(?:\[\])+$/gi);var exist=utils.isset(options[name]);var value=this.type=="checkbox"?this.checked:$this.val();if((multi||exist)&&!utils.isArray(value)){value=[value]}else{if(utils.isEmpty(value)){return}}if(exist){if(!utils.isArray(options[name])){options[name]=[options[name]]}$.each(value,function(i,item){options[name].push(item)})}else{options[name]=value}});return options}utils.template=function(source,params){var isfunc=utils.isFunction(params),result="",index=0;if(!utils.isString(source)){throw new Error("Source is not a string")}if(!isfunc&&!utils.isObject(params)){throw new Error("Params must be an object or function")}while(true){var begin=source.indexOf("{{",index);var close=source.indexOf("}}",begin);if(begin<0||close<0){result+=source.substring(index);break}var name=source.substring(begin+2,close);var value=isfunc?params(name):params[name];if(utils.isset(value)){result+=source.substring(index,begin);result+=value}else{result+=source.substring(index,close+2)}index=close+2}return result}})(window,window.utils,window.jQuery);