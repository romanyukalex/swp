(function(isTest){FormStat=function(){this.init=function(){this.formStatUrl="/pages/proxy.jsp?proxyType=agent&proxyMethod=GET&urlCode=save_stat";this.formStatUrlPost="/pages/proxy.jsp?proxyType=agent&proxyMethod=POST&urlCode=save_stat_post";this.method="get";this.formStatParams={user_id:null,region:null,city:null,order_type:0,referer:null,mpz_request:null,mpz_answer:null,mpz_order_num:null,step:null,form_version:window.testFormVersion?window.testFormVersion:1,mpz_tag_id:0,form_url:null};return this};this.setMethodGet=function(){this.method="get";return this};this.setMethodPost=function(){this.method="post";return this};this.setUserId=function(user_id){this.formStatParams.user_id=user_id;return this};this.setCity=function(city){this.formStatParams.city=city;return this};this.setRegion=function(region){this.formStatParams.region=utils.toInt(region);return this};this.setOrderType=function(order_type){this.formStatParams.order_type=order_type;return this};this.setStep=function(step){this.formStatParams.step=step;return this};this.setFormVer=function(ver){this.formStatParams.form_version=ver;return this};this.setTagId=function(tag_id){this.formStatParams.mpz_tag_id=tag_id;return this};this.setFormUrl=function(url){this.formStatParams.form_url=encodeURIComponent(url);return this};this.setReferer=function(referer){this.formStatParams.referer=encodeURIComponent(referer);return this};this.setMpzRequest=function(mpz_request){this.formStatParams.mpz_request=mpz_request;return this};this.setMpzAnswer=function(mpz_answer){this.formStatParams.mpz_answer=mpz_answer;return this};this.setMpzOrderNum=function(mpz_order_num){this.formStatParams.mpz_order_num=mpz_order_num;return this};this.saveStat=function(){if(this.formStatParams.region!=null&&this.formStatParams.city!=null&&this.formStatParams.step!=null&&this.formStatParams.user_id!=null&&this.formStatParams.order_type!=null&&this.formStatParams.form_url!=null&&!isTest){if(this.method.toLowerCase()=="get"||this.method.toLowerCase()=="post"){$.extend(this.formStatParams,construct.prepare_utm());$.ajax({url:this.formStatUrl,data:this.formStatParams,dataType:"json",type:this.method.toUpperCase()}).done(function(data){utils.log(data)})}else{utils.log(this.formStatParams)}}else{utils.log(this.formStatParams)}};return this}})(window.isTest);