(function(){var construct={};construct.initOptionsMakeup=function(){};construct.initOptionsv01=function(){utils.log(arguments.callee)};construct.initDeviceSwiper=function(){$(".js-iCheck").on("ifChanged",function(el){var chb=$(el.currentTarget);chb.trigger("change")})};construct.initCart=function(){utils.log(arguments.callee);var _this=app.wi;$(".p-section-modeplay .js-iCheck").iCheck({cursor:true,inheritClass:true,checkboxClass:"iCheck0",checkedClass:"iCheck0_checked",uncheckedClass:"iCheck0_unchecked",disabledClass:"iCheck0_disabled"}).on("ifChanged",function(e){if(typeof _this.cart!=="undefined"&&_this.cart!=null){_this.cart.choiceMode(e)}})};construct.initPhoneSelector=function(){var select=$("#phoneSelect");select.selectric({customClass:{prefix:"selectric0",postfixes:"Input Items Open Disabled TempShow HideSelect Wrapper Hover Responsive",camelCase:false}}).change(function(e){var id=parseInt($(e.currentTarget).val());for(var t in app.wi.cart.all_phones){if(app.wi.cart.all_phones[t].id==id){app.wi.cart.all_phones[t].selected=true;var comment1="";var comment2="";var Info={info39:null,info43:null,info44:null,info45:null,info46:null};for(var ii=0;ii<app.wi.cart.all_phones[t].info.length;ii++){var __info=app.wi.cart.all_phones[t].info[ii];if(typeof __info.optCostId!="undefined"){Info["info"+__info.type]=parseInt(__info.value)}}if(Info.info45){comment1="(включая "+(typeof Info.info45=="number"?utils.parseFee(Info.info45):"")+" руб./мес. за предоставление абонентской линии)<br/>"}if(Info.info46){comment2+="Стоимость 1 минуты соединения<br/>";comment2+="&#8212; "+utils.parseFee(Info.info44)+" руб./мин. (с 08:00 до 22:00)<br/>";comment2+="&#8212; "+utils.parseFee(Info.info46)+" руб./мин. (с 22:00 до 08:00)<br/>"}else{if(Info.info43){if(parseInt(Info.info43)!=0){comment2+=Info.info43+" минут включено в тариф"}if(Info.info44&&!isNaN(Info.info43)){if(comment2.length>0){comment2+=", "}comment2+=""+(typeof Info.info44=="number"?utils.parseFee(Info.info44):"")+" руб./мин. с "+(parseInt(Info.info43)+1)+" минуты"}comment2+="."}}if(mrf.isUral(app.wi.cart.reg_id)){comment2+=" неограниченное количество минут включено в тариф"}if(mrf.isSouth(adrMgr.selectedRegion.klRegion)){var selectedId=$("#phoneSelect").val();for(var t=0;t<app.wi.cart.all_phones.length;t++){if(app.wi.cart.all_phones[t].id==selectedId&&app.wi.cart.all_phones[t].title.indexOf("Абонентский")>=0){comment2+="неограниченное количество минут включено в тариф."}}}$("#phoneDesc").html(comment1+comment2)}else{app.wi.cart.all_phones[t].selected=false}}app.wi.cart.rendered=false;app.wi.cart.renderCart()})};construct.reloadAll=function(reset){$.each(actions,function(){this()});utils.log("reload DOM");if(reset){construct.resetHeight()}};construct.reloadByName=function(array,reset){var fu=[];$.each(array||[],function(){var _fName=this;var _f=actions[_fName];if(fu[_fName]){utils.Error("function "+_fName+" already init")}if(!utils.isFunction(_f)){utils.Error("cannot define this function "+_fName+" check actions")}try{_f()}catch(e){utils.log(e)}fu.push(_fName)});utils.log("reloaded func: "+fu);if(reset){construct.resetHeight()}};construct.resetHeight=function(){if(!$("html").hasClass("flexbox")){contentBlockHeigth();utils.log("reset height")}};construct.initMinApp=function(){$(".feedback__link").magnificPopup({type:"inline",closeBtnInside:true,showCloseBtn:false,callbacks:{beforeOpen:function(){this.bgOverlay.setMod("topshadow")}}});$("#feedback").find(".p-feedback__close").on("click",function(){$.magnificPopup.close()});construct.reloadByName(["mobileMenu","mobileMenuSecondLevelOpen","modalAuthInit","notifyBar","iCheckInit","selectLocation","singlePageNav","thirdNavInit","pageSwiper","selectricInit","accordionInit","placeholderInit"],true)};construct.initConfigurator=function(){construct.reloadByName(["configChoise","configEquipment","configuratorSwiper","floatBasket","iCheckInit","tariffsConfigurator","showPromoBlock","placeholderInit","selectricInit","mfpScrolledBlocks"],true);initDatePick($(".js-input-datepick"))};construct.sourceCookieInfo=function(){try{var ref=document.referrer;if(!ref||ref.indexOf(".rt.ru")<0){var cookiePrm={path:"/"};var isIe=document.documentMode;if(!isIe||(isIe&&parseInt(document.documentMode)>9)){cookiePrm.domain="rt.ru"}var mas=document.cookie.split(";");for(var i=0;i<mas.length;i++){var cookieName=mas[i].split("=")[0].split(" ").join("");if(cookieName.toLowerCase().indexOf("utm_")>=0||cookieName.toLowerCase()=="text"){utils.setCookie(cookieName,"",cookiePrm)}}if(typeof(document.referrer)!="undefined"&&document.referrer!=""){utils.setCookie("refer",document.referrer,cookiePrm)}}var cookieParam={path:"/"};var isIe=document.documentMode;if(!isIe||(isIe&&parseInt(document.documentMode)>9)){cookieParam.domain="rt.ru"}var hashes=window.location.href.slice(window.location.href.indexOf("?")+1).split("&");for(var i=0;i<hashes.length;i++){var getAttr=hashes[i].split("=");if(getAttr[0].toLowerCase().indexOf("utm_")>=0||getAttr[0].toLowerCase()=="text"){try{utils.setCookie(getAttr[0],getAttr[1],cookieParam)}catch(errore){utils.log("ERROR sourceCookieInfo: "+errore)}}}}catch(error){utils.log("ERROR sourceCookieInfo: "+error)}};construct.try_set_utm=function(params,name,value){var _name=name.toLowerCase(),_value=utils.decodeURI(value);try{if(_name=="referrer"||_name=="refer"){params.refer=_value.toLowerCase().indexOf(".rt.ru")>=0?"direct":_value}else{if(_name=="text"||_name=="keyword"||_name.indexOf("utm_")>=0){params[_name]=_value}}}catch(errore){utils.log(errore)}};construct.prepare_utm=function(){try{var result={};if(window.traffic){for(var field in traffic){if(typeof traffic[field]=="object"){var obj=traffic[field];for(var u in obj){this.try_set_utm(result,u,obj[u])}}else{this.try_set_utm(result,field,traffic[field])}}}var hashes=window.location.href.replace(window.location.hash,"").slice(window.location.href.indexOf("?")+1).split("&");for(var i=0;i<hashes.length;i++){var getAttr=hashes[i].split("=");this.try_set_utm(result,getAttr[0],getAttr[1])}try{var form_url=location.pathname.split("/");result.form_name=form_url[form_url.length-1]}catch(errore){utils.log("ERROR utm_tag: "+errore)}return result}catch(Error){utils.log("ERROR utm_tag: "+Error);return{}}};construct.utm_tag=function(orderTab){try{orderTab.params=$.extend(true,this.prepare_utm(),orderTab.params)}catch(Error){utils.log("ERROR utm_tag: "+Error)}};construct.initMinApp();construct.sourceCookieInfo();window.construct=construct})();