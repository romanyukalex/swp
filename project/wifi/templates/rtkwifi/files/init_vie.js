var initView={};initView.init=function(data){var view=IptvCompareView(new IptvCompareModel(data,IptvCompareConfig.getPackKeys(),IptvCompareConfig.getSubjectNames()));var $link=$("#tv-compare-open");$link.magnificPopup({preloader:true,type:"inline",closeBtnInside:false,showCloseBtn:false,fixedContentPos:false,callbacks:{beforeOpen:function(){view.beforeOpen();IptvCompareConfig.costs=[];if(typeof app.wi.cart.prices!=="undefined"){for(i=1;i<=6;i++){var p=app.wi.cart.prices.singlepay[i]/100;if(app.wi.cart.mode=="doubleplay"){p+=app.wi.cart.prices.discount_doubleplay[i]/100}if(app.wi.cart.mode=="tripleplay"){p+=app.wi.cart.prices.discount_tripleplay[i]/100}IptvCompareConfig.costs.push(p)}}var basket=$("#tv-compare").find(".package-list");basket.find(".package-list__item").remove();var html="";for(var i=0,n=app.wi.cart.basic_iptv.length;i<n;i++){var cost=IptvCompareConfig.costs[i];html+='<p class="row-brd-dotted package-list__item"><span class="row-brd-dotted__cnt package-list__item-name">'+(i+1)+'-й пакет</span><span class="row-brd-dotted__cnt package-list__item-price"><span class="cost-rubmon">'+cost+"</span></span></span></p>"}basket.prepend(html);$("#package-label-wrap").find(".package-label.package-label_view-panel.package-label_state-first").click();for(var p in app.wi.cart.data.choice_packages){if(app.wi.cart.data.choice_packages[p].packgeType==26){var filter="[data-alias="+app.wi.cart.data.choice_packages[p].alias+"]";$(".package-label__ico").filter(filter).parent().click()}}},afterClose:function(){if(view.wasExitOnConnect()){for(var alias in app.wi.cart.basic_iptv){app.wi.cart.cache_pkg[app.wi.cart.basic_iptv[alias]].enable()}$("#package-label-wrap").find(".package-label.package-label_view-panel").not(".package-label_state-first").find(".package-label__ico").each(function(){var alias=$(this).data("alias");app.wi.cart.cache_pkg[alias].disable()})}}}})};initView.callback=function(selectedPackKeys){utils.log(selectedPackKeys)};